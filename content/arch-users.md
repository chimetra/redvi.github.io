Title: Пользователи и группы в Archlinux
Date: 2011-11-27 08:15
Tags: Arch, Linux
Slug: arch-users
Author: redVi
Summary: Наиболее удобным инструментом для создания нового пользователя служит команда adduser.

Наиболее удобным инструментом для создания нового пользователя служит команда `adduser`.

Вам будут заданы вопросы касательно имени, домашней директории, пароля, принадлежности к тем или иным пользовательским группам. После ввода основной информации вы сможете добавить дополнительную как то: полное имя, рабочий и домашний телефоны и прочее.

Список доступных в archlinux групп можно посмотреть в файле `/etc/group`. Если вы уже создали пользователя и назначили ему список групп, его имя также будет записано в этот файл напротив тех групп, которым он принадлежит.

* Примерный список групп, куда можно внести пользователя:
    - lp - доступ к печати
    - wheel - административные привилегии
    - ftp - доступ к указанной службе
    - mail - почта
    - games - доступ к играм
    - network - управление сетью
    - video - доступ к видео (графика, фильмы)
    - audio - возможность "слышать"
    - optical - доступ к оптическим дискам
    - floppy - возможность использовать floppy-дисковод (если он ещё есть)
    - storage - доступ к различным накопителям
    - power - управление питанием
    - users - стандартные привилегии, группа по умолчанию

Вы можете использовать `useradd` для добавления пользователя в систему. Например формат записи:
`useradd опции имя пользователя`

* Некоторые опции useradd:
    - -c - комментарий
    - -d - задать домашний каталог
    - -D - создать с настройками по умолчанию
    - -e - отключить учётную запись в указанный день. задаётся в формате YYYY-MM-DD - год. месяц, день
    - -G - принадлежность к дополнительным группам
    - -m - создать пользовательскую директорию в /home
    - -p - задать пароль
    - -n - не создавать индивидуальную группу для пользователя

Впрочем, пароль вы можете задать позже, но пока его не будет, учётная запись останется заблокированной.
А как вносить изменения в учётную запись уже созданного пользователя?

`useradd, usermod, userdel` — команды для добавления, модификации и удаления пользователей.

`groupadd, groupmod, groupdel` — команды для добавления, модификации и удаления групп.

`gpasswd` — команда для модификации файла `/etc/group`.

* Что можно сделать с помощью usermod:
    - -d - изменить домашний каталог
    - -s - изменить оболочку
    - -p - изменить пароль
    - -g - изменить первичную группу
    - -G - дополнительную группу


* Что можно сделать с помощью userdel:
    - -f - удалит пользователя даже когда он находится в системе или его каталог используется
    - -r - удалить домашний каталог рекурсивно

Например, мы хотим добавить пользователя `user1` в группу администраторов - `wheel`. Это будет выглядеть так:

```console
# usermod -G wheel user1
```

Теперь проверьте `/etc/group`. Появился ли наш пользователь в группе `wheel`? Конечно, да.

А что с группами?

* Добавить при помощи groupadd:
    - -g - GID > 499
    - -r - GID < 499
    - -f - если GID группы уже существует, он будет изменён

* Изменить при помощи groupmod:
    - -g - GID
    - -n - дать группе новое наименование

* И, наконец, очень удобная команда gpasswd:
    - -a - добавить пользователя в группу
    - -d - удалить пользователя из группы
    - -r - удалить пароль группы
    - -A - назначить администратора группы
    - -M - добавить несколько пользователей в группу

Заставим пользователя периодически менять его пароль:

```console
# change user1:
```

`Minimum Password Age` - минимальное количество дней, в течении которых пользователю не разрешено менять пароль

`Maximum Password Age` - максимальное количество дней, в течении которых можно будет входить в систему под этим паролем

`Last Password Change` - когда произошло последнее изменение пароля

`Password Expiration Warning` - за какое количество дней до блокировки выводить сообщения

`Password Inactive` - число дней после истечения срока действия пароля перед его блокировкой

`Account Expiration Date` - истечение срока действия учётной записи, при отрицательном значении - никогда

Вот такая вышла небольшая заметка для юных администраторов.
