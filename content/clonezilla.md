Title: Простое создание резервных копий с clonezilla
Date: 2012-10-16 08:15
Tags: Arch, Linux
Slug: clonezilla
Author: redVi
Summary: Наиболее простой способ сохранить копию своей системы.

Весьма и весьма удобно создавать образ своей операционной системы, дабы затем восстанавливать не отдельные разделы, а всё — целиком и полностью. В linux традиционно принято проводить эту процедуру при помощи утилиты dd, которая копирует содержимое диска поблочно, ну и восстанавливает так же. То есть если объём вашего нынешнего HDD 500 Гб, то восстановив свои данные на новый диск, вы получите те же 500 Гб, даже если ваш новый диск имеет куда больший размер. Остальное пространство использовано не будет. По этому поводу сегодня вспомним другую полезность в лице cp, а также упростим процедуру создания образа диска с linux.


Заранее приношу свои извинения за качество снимков, процедура проводилась на реальном железе. Скрины с виртуальной машины, конечно, выглядели бы эстетичнее.

Итак, ежели поблочное копирование вам не нужно ввиду желания поместить систему на диск большего объёма, читаем заметку о создании резервного копирования при помощи [cp](linux-on-hdd.html).

Для всех остальных предназначен данный пост, где мы рассмотрим такую замечательную штуку как clonezilla. Clonezilla умеет работать с любой операционной системой, поэтому создаст вам точную копию диска как Windows, так и Linux машины.

Скачать live cd clonezilla можно [по этому адресу](http://clonezilla.org/downloads.php). После чего следует записать образ на диск либо создать загрузочную флешку. Собственно, как с этим работать:

clonezilla так же как и dd берёт всё содержимое вашего жёсткого диска и архивирует его. При последующем восстановлении системы, хоть на пустой диск, хоть на диск с какими-либо данными ( которые затрутся впоследствии) вы получите те же разделы того же размера, которые имелись на момент создания образа. Что ж, начали.


### Загружаемся с live cd — параметры можно оставить по дефолту

Далее нам будет предложено выбрать язык и раскладку клавиатуры. Поскольку мы являемся носителями русского языка, его и выберем. Также убедительно попросим не трогать раскладку.

![img](http://3.bp.blogspot.com/-053eQvEIivQ/UGUy1p3iQEI/AAAAAAAABj4/uh8D7ru8LEc/s1600/language.jpg)

Далее выберите, что угодно вам: создание образа диска как в этом примере или же работа с отдельными разделами

![img](http://3.bp.blogspot.com/-Tf2U24_pwBE/UGUy8DzAL-I/AAAAAAAABkA/fcVK1pWFOL8/s1600/clonezilla.jpg)

После чего нас снова попросят сделать выбор:

clonezilla может создать образ на локальном диске, передать его по ssh или на samba-сервер/nfs-сервер. Skip следует нажать в случае, если настройки были произведены вами ранее и уже сохранены — не наш случай

![img](http://4.bp.blogspot.com/-HCy8IbLWVZ0/UGUzDcQxP0I/AAAAAAAABkI/VOf5f3Y3V1w/s1600/local_dev.jpg)


### Теперь внимание! — ответственный момент

Сначала следует выбрать диск-источник, с которого будет снят образ.

И уже после диск-приёмник, куда наш образ будет сохранён и откуда будет с лёгкостью восстановлен при необходимости.

![img2](http://3.bp.blogspot.com/-u8XX9bapta0/UGUzOoZsq2I/AAAAAAAABkQ/T2a7gaxvC3o/s1600/sda.jpg)

Программа предложит сохранить данные на usb-накопитель, что чаще всего и бывает нужно. Если так, подключите usb-диск, подождите немного пока он смонтируется в нужную директорию и жмите `Enter`. Сохраним диск как образ системы

![img2](http://3.bp.blogspot.com/-52Ee6CrfqRc/UGUzWPAOlPI/AAAAAAAABkY/W85cr9I70x4/s1600/savedisk.jpg)


### После этого надо будет лишь изъявить своё желание в последующей проверке образа либо отказаться от этой процедуры.


В завершение выйдем в командную строку и перезугрузимся:

```console
$ exit
$ sudo reboot
```

### Восстановление образа происходит так же

Выбор диска откуда восстанавливать, выбор места, куда.

Только теперь вместо сохранения на диск будет использован другой пункт — `restore`:

![img3](http://2.bp.blogspot.com/-xO7bxANOtGo/UGUzjP3yo1I/AAAAAAAABkg/kEEl0oExGWY/s1600/restore.jpg)

 Просто и удобно. Также помните, что в случае выбора каких-либо неверных настроек до начала процедуры архивирования/восстановления вы всегда можете выйти в консоль и начать заново.
