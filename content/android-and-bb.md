Title: Сквозное подключение. Android и ББ
Date: 2012-09-15 08:25
Tags: Android
Slug: android-and-bb
Author: redVi
Summary: ББ - большой брат, то есть компьютер или ноутбук с каким-либо подключением к интернету.

ББ &mdash; большой брат, то есть компьютер или ноутбук с каким-либо подключением к интернету.

### Зачем это нужно?

Например, ситуация: у вас есть доступ к сети по DSL, wi-fi нет, GPRS слишком дорог. Что делать? Правильно, заняться подключением брата меньшего к брату старшему, дабы спокойно обновлять приложения и ходить в твиттер через android-устройство.


<b>Внимание!</b> Для сквозного подлючения необходимо получить права рута для вашего устройства. Один из способов рассмотрим прямо сейчас.

## Шаг 1. Root-права

Для прошивок 4.0.4 и 4.0.3

- Закинуть Root SuperSU в корень вашего устройства
- Зайти в режим рекавери - Громкость вверх + Home +Power
- Выбрать и проинсталлировать файл [Root_SuperSU.0.95-Busybox.1.20.2-S2-signed.zip](https://docs.google.com/open?id=0ByEuEzl-f9rcOWl0M09FNmM2ZXM)
- Выбирать apply update from external storage (перемещение клавишами громкости , выбор - клавиша power)
- Выйти на уровень выше
- Выбрать reboot now

Готово

## Шаг 2. Настройка подключения

### Способ 1. Без установки сторонних утилит для подключения

- Установить Android Terminal Emulator и Gscript Lite
- Подключить телефон к ББ при помощи usb. В настройках телефона:
```
- Настройки --> Дополнительно --> Модем и точка доступа --> USB-модем
```

<a href="http://farm6.staticflickr.com/5533/9302009258_cc80988d3e_o.png" data-lighter><img src="http://farm6.staticflickr.com/5533/9302009258_cc80988d3e_o.png" alt="modem"/></a>

На компьютере определится новое сетевое соединение. Теперь нужно внести необходимые настройки ip-адреса и маски подсети, а также расшарить наше основное активное подключение. Иными словами открыть общий доступ.

Настройки нового сетевого соединения. Вам нужно заменить адреса на свои:

<a href="http://2.bp.blogspot.com/-qJdC-xGe2jQ/UD8oMi8NziI/AAAAAAAABVI/CQtGHtVv74Q/s1600/android-inet_modem.png" data-lighter><img src="http://2.bp.blogspot.com/-qJdC-xGe2jQ/UD8oMi8NziI/AAAAAAAABVI/CQtGHtVv74Q/s1600/android-inet_modem.png" alt="win"/></a>

Вместо адреса `192.168.42.1` вам следует прописать адрес вашего устройства. Для этого открываем `Android Terminal Emulator` и пишем:

```console
$ su
# netcfg
```

- Смотрим на вывод команды, запоминаем или записываем куда-нибудь искомую информацию, а именно:
- название устройства (например, usb0 или rndis0 как у нас)
- его IP, в нашем случае это 192.168.42.1

<a href="http://farm8.staticflickr.com/7282/9302020640_386664f839_o.png" data-lighter><img src="http://farm8.staticflickr.com/7282/9302020640_386664f839_o.png" alt="ip"/></a>

Открываем доступ к Большому Брату:

<a href="http://2.bp.blogspot.com/-poWtVubc-7k/UD8ocNjPp3I/AAAAAAAABVY/ZwsbYISHoK4/s1600/DSL.png" data-lighter><img src="http://2.bp.blogspot.com/-poWtVubc-7k/UD8ocNjPp3I/AAAAAAAABVY/ZwsbYISHoK4/s1600/DSL.png" alt="bb"/></a>

Также включим маршрутизацию:

<a href="http://4.bp.blogspot.com/-a-EABjP0PfM/UD8qHXfUQFI/AAAAAAAABVw/85Ln0rDxUII/s1600/android-inet.png" data-lighter><img src="http://4.bp.blogspot.com/-a-EABjP0PfM/UD8qHXfUQFI/AAAAAAAABVw/85Ln0rDxUII/s1600/android-inet.png" alt="rr"/></a>

Открываем `Gscript Lite` и рисуем код, снова подставив свои, а не автора значения.
Код:

```console
# ifconfig rndis0 up
# route add default gw 192.168.42.1 dev rndis0
# setprop net.dns1 8.8.8.8
```

Интерпретация:

- Первая команда поднимет сетевой интерфейс
- Вторая укажет адрес шлюза и устройство
- Третья присвоит DNS-адрес, который может быть и адресом вашего Провайдера. В примере стандартный DNS Google

Сохраните скрипт

<a href="http://farm8.staticflickr.com/7350/9299248439_9542f5faf4_o.png" data-lighter><img src="http://farm8.staticflickr.com/7350/9299248439_9542f5faf4_o.png" alt="script"/></a>

Ответственный момент - подключение:

- Зажать клавишу Power - включить Передачу данных
- Открыть Gscript Lite, запустить скрипт
- Зажать Power - отключить передачу данных

<a href="http://farm8.staticflickr.com/7459/9302043992_bd55c3a947_o.png" data-lighter><img src="http://farm8.staticflickr.com/7459/9302043992_bd55c3a947_o.png" alt="run"/></a>

<b>Интерпретация:</b>

В принципе в интернет устройство ходить уже может, но по-прежнему думает, что подключения нет. Шаманство с интерпретацией данных должно сэмулировать мобильное интернет-подключение, тогда телефон решит, что он официально подключен к глобальной сети и помимо хождения по страницам позволит обновлять приложения и полноценно работать с Google Play. Хотя, надо отметить, что некоторые уже установленные приложения самостоятельно обновлять данные не пожелают. Это относится, например к обновлению баз Doctor Web. Баз, а не самого антивируса, ибо с Маркетом проблем нет.

Если что-то не выходит, пользуемся ссылкой по теме. Способы есть разные, но для остальных нужны дополнительные приложения. Не стоит ставить лишний хлам, если и так всё работает.


