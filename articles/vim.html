<!DOCTYPE html>
<html lang="ru">
<head>
  <title>Vim как основной текстовый редактор</title>
  <meta charset="utf-8">
  <meta name="description" content="Есть такой замечательный редактор - vim. Насколько он удобен в использовании, настолько и сложен в освоении.">  <meta name="author" content="redVi">  <meta name="viewport" content="initial-scale=1.0, width=device-width" />
  <link href="../theme/css/screen.css" rel="stylesheet" type="text/css" />
  <meta name='yandex-verification' content='494a81ecb0e796d6' />
  <link rel="icon" href="../favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
  <link href="../" type="application/atom+xml" rel="alternate" title="unix-lab.org ATOM Feed" />
  <link href="../feeds/rss.xml" type="application/rss+xml" rel="alternate" title="unix-lab.org RSS Feed" />
</head>
<body>
<div id="outer-wrapper">
<div id="header-wrapper">
    <a href=".."><div class="logo"></div></a>
    <div class="small">блог об операционных системах, open source и программировании</div>
<div class="nav">
        <ul>
      <li><a href="../archives.html">Архив</a></li>
      <li><a href="../about.html">О блоге</a></li>
      <li><a href="../authors.html">Экипаж</a></li>
    </ul>
</div>
</div>    <div id="main">
<h2><a href="../articles/vim.html">Vim как основной текстовый редактор</a></h2>
<h5><i class="icon-feather"></i> 19 Август 2012 </h5>
<p>Есть такой замечательный редактор &mdash; vim. Насколько он удобен в использовании, настолько и сложен в освоении. Помнится, когда автору впервые пришлось открыть сие чудо работы с текстом, минут семь было затрачено на поиск того, как же это дело теперь закрыть.</p>
<p>На самом деле vim содержит большое количество труднозапоминаемых команд, но использовать их все как правило не приходится. Ниже представлен список основных команд, нужных для обычной повседневной работы, а также файл <code>.vimrc</code>, очень простой, содержащий лишь строку &mdash; самую главную.</p>
<p>Итак, основные команды для работы с vim.</p>
<p>Если вы открыли vim без предварительного чтения какого-либо справочного материала, спешу радостно сообщить вам, что вы обречены продолжить свой путь в поисковой системе, с глазами по чайнику и одним-единственным вопросом "как выйти из vim". Поэтому давайте начнём  сглавного, а именно:</p>
<h3>Выход из текстового редактора</h3>
<ul>
<li><code>:q + !</code> - выйти без сохранения документа</li>
<li><code>:w + q</code> - записать изменения и выйти</li>
</ul>
<p>Вам следует знать, что vim имеет три режима для различных действий. Это может быть просмотр, вставка текста или же вставка команд.</p>
<h3>Режимы в vim</h3>
<ul>
<li><code>ESC</code> - переключение к визуальному режиму</li>
<li><code>:</code> - переключение к командному режиму ( для вставки команд )</li>
<li><code>i</code> - перейти в режим вставки текста</li>
</ul>
<h3>Работа с текстом, вставка/замена/копирование</h3>
<ul>
<li><code>i</code> - вставка текста</li>
<li><code>r + нужная буква</code> - замена буквы в слове на нужную (при опечатке, например)</li>
<li><code>4 + dd</code> - удалить 4 строки</li>
<li><code>3 + x</code> - удалить 3 символа</li>
<li><code>shift + d</code> - удалить от текущей позиции до конца строки</li>
<li><code>:% + s + /old/new/ + g</code> - заменить все слова 'old' на 'new'</li>
<li><code>:r + file.txt</code>  - прочитать и вставить содержимое файла 'file.txt' в место под курсором</li>
<li><code>:0r + file.txt</code>  - вставить файл в начало документа</li>
<li><code>:$ + r + file.txt</code>  - вставить файл в конец документа</li>
<li><code>:w + &gt;&gt; + ~/file.txt</code>  -  дописать содержимое буфера в конец другого файла</li>
<li><code>s</code> - замена текущего символа</li>
<li><code>shift + s</code> - замена текущей строки</li>
<li><code>d + 1</code> - удалить один символ</li>
<li><code>d + w</code> - удалить слово</li>
<li><code>d + d</code> - удалить строку</li>
<li><code>y + y</code> - скопировать строку</li>
<li><code>y + a + p</code> - скопировать абзац</li>
<li><code>p</code> - вставить</li>
<li><code>u</code> - отменить изменение</li>
<li><code>ctrl + r</code> - восстановить отменённый текст</li>
<li><code>:earlier + 5m</code> - воссоздать текст таким, каким он был 5 минут назад</li>
<li><code>:later + 10s</code> - наоборот переместиться на 10 секунд вперёд</li>
</ul>
<h3>Перемещение по тексту</h3>
<ul>
<li><code>w</code> - передвинуть курсор вперед на одно слово</li>
<li><code>b</code> - передвинуть курсор назад на одно слово</li>
<li><code>0</code> - передвинуть курсор на начало текущей строки</li>
<li><code>$</code> - передвинуть курсор на конец текущей строки</li>
<li><code>5 + e</code> - перейти к пятому слову от курсора</li>
<li><code>}</code> - перейти к следующему параграфу</li>
<li><code>35 + j</code> - на 35 строк вниз</li>
<li><code>35 + k</code> - на 35 строк вверх</li>
<li><code>5 + l</code> - на 5 символов вправо</li>
<li><code>5 + h</code> - на 5 символов влево</li>
<li><code>50 + shift + g</code> - на страницу 50</li>
<li><code>%</code> - перейти к парной скобке</li>
</ul>
<h3>Поиск по тексту/выделение</h3>
<ul>
<li><code>/ + g</code> - искать слова, начинающиеся на "g"</li>
<li><code>n</code> - перейти к следующему слову в поиске</li>
<li><code>shift + n</code> - перейти к предыдущему слову в поиске</li>
<li><code>v + %</code> - когда курсор установлен на одной из скобок - выделит всё до её пары.</li>
<li><code>vi + b</code> - выделить всё между двумя ближайшими к курсору круглыми скобками</li>
<li><code>vi + B</code> - выделить всё между двумя ближайшими к курсору фигурными скобками</li>
<li><code>vi + "</code> - выделить всё между двумя ближайшими двойными кавычками</li>
<li><code>vi + '</code> - выделить всё между двумя ближайшими одинарными кавычками</li>
<li><code>gg + VG</code> - выделить весь файл</li>
</ul>
<h3>Разное</h3>
<p>Открыть файл, но предопределить синтаксис редактора:</p>
<ul>
<li><code>$ vim "+set filetype=lisp" file.rb</code></li>
<li><code>Ctrl + wv</code> - разбить окно по вертикали</li>
<li><code>Ctrl + ww</code> - переключиться между окнами</li>
<li><code>$ vim -R</code> - открыть файл только для чтения</li>
<li><code>:set local spell spelllang = en_us</code> - проверка орфографии</li>
<li><code>:tabedit + file</code> - открыть файл во вкладке</li>
<li><code>:tabnew</code> - открыть новую вкладку в новом буфере</li>
<li><code>:tabc или :q</code> - закрыть вкладку</li>
<li><code>:sp</code> - разделить окно</li>
<li><code>m + имя закладки</code> - создать закладку в тексте</li>
<li><code>' + имя закладки</code> - вернуться к закладке</li>
<li><code>vim ftp://ftp.site.com/file</code> - правка документа по ftp</li>
<li><code>:! + command</code> - запустить команду оболочки в vim, где command - нужная команда</li>
<li><code>:Vex или :Sex</code> - открытие дерева каталогов</li>
</ul>
<h3>Комментирование кода:</h3>
<p>Чтобы закомментировать участок кода:</p>
<ul>
<li><code>ctrl + v</code> - выделяем нужный участок</li>
<li><code>shift + i</code> - вставляем знак комментария</li>
<li><code>ESC</code> - подтвердить</li>
</ul>
<p>Удалить участок кода:</p>
<ul>
<li><code>ctrl + v</code> - выделить участок для удаления</li>
<li><code>shift + x</code> - удалить выделенные символы (символы комментария)</li>
</ul>
<h3>"Табличное" копирование</h3>
<ul>
<li><code>ctrl + v</code> - для выделения текста</li>
<li><code>3 + j</code> - для перехода на три строки вниз</li>
<li><code>$</code> - перемещение курсора в конец строки</li>
<li><code>y</code> - копирование</li>
<li><code>p</code> - вставка</li>
</ul>
<p>Таким образом, можно скопировать не отдельные строки, а таблицу из файла</p>
<p>Чтобы горячие клавиши vim легче запомнились, можно держать перед глазами или "вклеить" в обои рабочего стола вставки с ними:</p>
<ul>
<li>для светлого фона:</li>
</ul>
<p><img alt="vim light" src="http://4.bp.blogspot.com/-VFQ86ePWBf0/UTd3jbNJUtI/AAAAAAAAEGY/q-4lH_0--SA/s1600/vim_table.png" /></p>
<p>-для тёмного фона:</p>
<p><img alt="vim dark" src="http://2.bp.blogspot.com/-1j6nmxzR4CA/UTd3s4LFoSI/AAAAAAAAEGg/F-RnTlJdiLI/s1600/vim.png" /></p>
<h3>Плагины</h3>
<p>Для vim существует огромное количество самых разных плагинов, призванных расширить функционал или же упростить работу с этим текстовым редактором. Из vim можно даже сделать настоящий IDE: попробуйте установить Eclim, если вам это нужно.</p>
<p>Все доступные плагины следует найти и забрать со страницы <a href="http://www.vim.org/index.php">vim.org</a>. Рассмотрим некоторые из них.</p>
<ul>
<li>поддержка языка python.</li>
</ul>
<p>Скачать плагин можно со страницы <a href="http://www.vim.org/scripts/script.php?script_id=1439">http://www.vim.org/scripts/script.php?script_id=1439</a>, после чего нужно положить его в директорию <code>~/.vim/compiler</code> и дать команду <code>:make</code> для сборки плагина.</p>
<ul>
<li>Плагин Project</li>
</ul>
<p>станет неплохим подспорьем при создании новых проектов. Забрать здесь: <a href="http://www.vim.org/scripts/script.php?script_id=69">http://www.vim.org/scripts/script.php?script_id=69</a></p>
<p>Распаковать в <code>~/.vim/</code> и запустить командой <code>:Project</code>.</p>
<ul>
<li>Поддержка шаблонов</li>
</ul>
<p>также сэкономит немало времени, если вы пишете один и тот же код во многих файлах. Это могут быть html-теги или же указание к пути интерпретатора в каждом файле python. Местонахождение плагина <a href="http://www.vim.org/scripts/script.php?script_id=2834">http://www.vim.org/scripts/script.php?script_id=2834</a></p>
<p>После скачивания плагина создайте директорию <code>.vim/templates/</code> с необходимыми шаблонами и укажите редактору на них. Например:</p>
<div class="highlight"><pre><span class="cp"># .vimrc</span>
<span class="o">:</span><span class="n">autocmd</span> <span class="n">BufNewFile</span>  <span class="o">*</span><span class="p">.</span><span class="n">py</span>      <span class="mi">0</span><span class="n">r</span> <span class="o">~/</span><span class="p">.</span><span class="n">vim</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="n">template</span><span class="p">.</span><span class="n">py</span>
<span class="o">:</span><span class="n">autocmd</span> <span class="n">BufNewFile</span> <span class="o">*</span><span class="p">.</span><span class="n">html</span>     <span class="mi">0</span><span class="n">r</span> <span class="o">~/</span><span class="p">.</span><span class="n">vim</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="n">template</span><span class="p">.</span><span class="n">html</span>
</pre></div>


<p>Это значит, что подготовленные нами шаблоны будут подгружаться каждый раз, когда мы создаём новый файл с одним из указанных форматов.</p>
<ul>
<li>плагин xml for vim</li>
</ul>
<p><a href="http://www.vim.org/scripts/script.php?script_id=301">http://www.vim.org/scripts/script.php?script_id=301</a> будет автоматически закрывать теги.</p>
<h3>Кодировка</h3>
<p>Часто кириллица отображается в виде разнообразных "кракозябр", если исходный файл был получен в кодировке cp-1251. Но мы можем отобразить всё нормально. Для этого нужно открыть исходный файл и внести некоторые преобразования:</p>
<div class="highlight"><pre><span class="o">&gt;</span> <span class="err">$</span> <span class="n">vim</span> <span class="n">file</span><span class="p">.</span><span class="n">txt</span>
<span class="o">&gt;</span> <span class="o">:</span><span class="n">e</span> <span class="o">++</span><span class="n">enc</span><span class="o">=</span><span class="n">cp</span><span class="o">-</span><span class="mi">1251</span>
</pre></div>


<p>Сейчас всё должно быть нормально.</p>
<p>Теперь небольшая доводка <code>.vimrc</code></p>
<div class="highlight"><pre><span class="o">&gt;</span> <span class="err">$</span> <span class="nx">cat</span> <span class="bp">.</span><span class="nx">vimrc</span>
<span class="o">-</span> <span class="err">Включить</span> <span class="err">подсветку</span> <span class="err">синтаксиса</span>
<span class="nx">syntax</span> <span class="k">on</span>
 <span class="o">-</span> <span class="err">Отображать</span> <span class="err">номера</span> <span class="err">строк</span>
<span class="nb">set</span> <span class="nx">number</span>
<span class="o">-</span> <span class="err">Настройки</span> <span class="err">табуляции</span>
<span class="nb">set</span> <span class="n">tabstop</span><span class="o">=</span><span class="mi">4</span>
<span class="nb">set</span> <span class="n">shiftwidth</span><span class="o">=</span><span class="mi">4</span>
<span class="nb">set</span> <span class="nx">smarttab</span>
<span class="o">-</span> <span class="err">Запоминать</span> <span class="err">историю</span> <span class="err">команд</span>
<span class="nb">set</span> <span class="n">history</span><span class="o">=</span><span class="mi">50</span>
<span class="o">-</span> <span class="err">Переносить</span> <span class="err">длинные</span> <span class="err">строки</span>
<span class="nb">set</span> <span class="nx">wrap</span>
<span class="o">-</span> <span class="err">Цвет</span> <span class="err">комментариев</span>
<span class="nx">highlight</span> <span class="nx">Comment</span> <span class="n">ctermfg</span><span class="o">=</span><span class="nx">Green</span>
<span class="o">-</span> <span class="err">Отключить</span> <span class="s2">&quot;звуковое сопровождение&quot;</span> <span class="err">редактора</span>
<span class="nb">set</span> <span class="nx">vb</span> <span class="n">t_vb</span><span class="o">=</span>
<span class="o">-</span> <span class="err">Настройки</span> <span class="err">порядка</span> <span class="err">кодировки</span> <span class="err">и</span> <span class="err">формата</span> <span class="err">файлов</span>
<span class="nb">set</span> <span class="n">ffs</span><span class="o">=</span><span class="nx">unix</span><span class="p">,</span><span class="nx">dos</span><span class="p">,</span><span class="nx">mac</span>
<span class="nb">set</span> <span class="n">fencs</span><span class="o">=</span><span class="nx">utf</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span><span class="nx">cp1251</span><span class="p">,</span><span class="nx">koi8</span><span class="na">-r</span><span class="p">,</span><span class="nx">ucs</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="nx">cp866</span>
<span class="o">-</span> <span class="err">Автозакрытие</span> <span class="err">фигурных</span> <span class="err">скобок</span> <span class="err">и</span> <span class="err">кавычек</span>

<span class="p">:</span><span class="nx">inoremap</span> <span class="s2">&quot; &quot;&quot; &lt;LEFT&gt;</span>
<span class="s2">imap [ []&lt;LEFT&gt;</span>
<span class="s2">imap ( ()&lt;LEFT&gt;</span>
<span class="s2">imap { {}&lt;LEFT&gt;</span>
<span class="s2">- Отключение создания файлов бекапа и свапа</span>
<span class="s2">set nobackup</span>
<span class="s2">set nowritebackup</span>
<span class="s2">set noswapfile</span>
</pre></div>


<h3>Цветовые схемы vim</h3>
<p>Можно использовать встроенный набор цветовых схем. Дабы выбрать какую-то из них, откройте vim и введите:</p>
<div class="highlight"><pre><span class="o">&gt;</span> <span class="n">colorcheme</span> <span class="err">имя</span><span class="o">-</span><span class="err">схемы</span>
</pre></div>


<p>Просмотреть все цветовые схемы:</p>
<div class="highlight"><pre><span class="o">&gt;</span> <span class="o">:</span><span class="n">colorscheme</span>
</pre></div>


<p>Для подстановки выбранной схемы жмите <code>&lt; Tab &gt;</code></p>
<p>Также можно найти привлекательные цветовые схемы на просторах Интернета. Они представляют собой текстовый файл настроек с расширением <code>.vim</code>, и класть такие файлы следует в директорию <code>~./vim/colors</code>, после чего прописать в <code>.vimrc</code> выбранную тему.</p>
<h3>Vim автокомплит</h3>
<p>Да, у vim много возможностей, большинство из которых реализованы в виде плагинов. Например, будет намного удобнее, если вместо ввода всего слова, мы пишем лишь часть, жмём <code>tab</code> - остальное дописывает vim. Автодополнение, да ещё и умное! Для этого нужно скачать плагин <code>SuperTab</code>, открыть его в vim и выполнить команду:</p>
<div class="highlight"><pre><span class="o">&gt;</span> <span class="o">:</span><span class="n">so</span><span class="o">%</span>
</pre></div>


<p>Плагин будет автоматически собран. Все его файлы помещены в директорию <code>.vim/</code></p>
<p><code>.vimrc</code> автора (или лучше <a href="https://github.com/redVi/dotfiles/tree/master/vim">забрать с github</a>)</p>
<div class="highlight"><pre><span class="nx">syntax</span> <span class="k">on</span>
<span class="nb">set</span> <span class="nx">number</span>
<span class="nb">set</span> <span class="n">tabstop</span><span class="o">=</span><span class="mi">4</span>
<span class="nb">set</span> <span class="n">shiftwidth</span><span class="o">=</span>
<span class="nb">set</span> <span class="nx">smarttab</span>
<span class="s2">&quot; Включаем &#39;умную&#39; автоматическую расстановку отступов</span>
<span class="s2">set smartindent</span>
<span class="s2">&quot;</span> <span class="err">Копирует</span> <span class="err">отступ</span> <span class="err">от</span> <span class="err">предыдущей</span> <span class="err">строки</span>
<span class="nb">set</span> <span class="nx">autoindent</span>
<span class="nb">set</span> <span class="n">history</span><span class="o">=</span><span class="mi">50</span>
<span class="nb">set</span> <span class="nx">wrap</span>
<span class="nb">set</span> <span class="nx">vb</span> <span class="n">t_vb</span><span class="o">=</span>
<span class="nb">set</span> <span class="n">ffs</span><span class="o">=</span><span class="nx">unix</span><span class="p">,</span><span class="nx">dos</span><span class="p">,</span><span class="nx">mac</span>
<span class="nb">set</span> <span class="n">fencs</span><span class="o">=</span><span class="nx">utf</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span><span class="nx">cp1251</span><span class="p">,</span><span class="nx">koi8</span><span class="na">-r</span><span class="p">,</span><span class="nx">ucs</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="nx">cp866</span>
<span class="p">:</span><span class="nx">inoremap</span> <span class="s2">&quot; &quot;&quot; &lt;LEFT&gt;</span>
<span class="s2">imap [ []&lt;LEFT&gt;</span>
<span class="s2">imap ( ()&lt;LEFT&gt;</span>
<span class="s2">imap { {}&lt;LEFT&gt;</span>
<span class="s2">set nobackup</span>
<span class="s2">set nowritebackup</span>
<span class="s2">set noswapfile</span>
<span class="s2">set foldenable</span>
<span class="s2">set fdm=syntax</span>
<span class="s2">set foldopen=all</span>
<span class="s2">&quot;</span> <span class="p">:</span><span class="nx">colorscheme</span> <span class="nx">railscasts</span><span class="s2">&quot;</span>
<span class="s2">:colorscheme codeschool</span>
<span class="s2">set background=dark</span>
<span class="s2">&quot;</span> <span class="err">Включаем</span> <span class="err">подсветку</span> <span class="err">выражения</span><span class="p">,</span> <span class="err">которое</span> <span class="err">ищется</span> <span class="err">в</span> <span class="err">тексте</span>
<span class="nb">set</span> <span class="nx">hlsearch</span>
<span class="s2">&quot;Настройки сворачивания блоков кода (фолдинг)</span>
<span class="s2">set foldenable &quot;</span> <span class="err">включить</span> <span class="err">фолдинг</span>
<span class="nb">set</span> <span class="n">foldmethod</span><span class="o">=</span><span class="nx">syntax</span> <span class="s2">&quot; определять блоки на основе синтаксиса файла</span>
<span class="s2">set foldcolumn=3 &quot;</span> <span class="err">показать</span> <span class="err">полосу</span> <span class="err">для</span> <span class="err">управления</span> <span class="err">сворачиванием</span>
<span class="nx">filetype</span> <span class="nx">plugin</span> <span class="k">on</span> <span class="s2">&quot; автоматически определять тип файла</span>
</pre></div>


<p><b>P.S.</b> рекомендации по поводу нужных настроек и дополнительных плагинов приветствуются</p>
<h5><i class="icon-user"></i> <a href="../author/redvi.html">redVi</a>,
<i class="icon-bookmarks"></i> <a href="../tag/editors.html">Editors</a> /
</h5>
<p align="center"><a href="#">наверх</a></p>
</div>
<div id="footer-wrapper">
<ul class="footer">
       <li class="footer"><a href="../tag/android.html">Android&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/arch.html">Arch&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/blog.html">Blog&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/debian.html">Debian&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/decorations.html">Decorations&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/django.html">Django&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/editors.html">Editors&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/gentoo.html">Gentoo&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/git.html">Git&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/javascript.html">JavaScript&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/kernel.html">Kernel&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/latex.html">LaTeX&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/python.html">Python&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/server.html">Server&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/web.html">Web&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/windows.html">Windows&nbsp;&bull;&nbsp;</a></li>
  </ul>
<br/><p>&copy;&nbsp;2011&mdash;2013&nbsp;&bull;&nbsp;<a href="..">unix-lab.org </a>&nbsp;&bull;&nbsp;powered by <a href="https://github.com/getpelican">pelican</a>&nbsp;&bull;&nbsp;<a href="http://creativecommons.org/licenses/by-nc/3.0/deed.ru">CC BY-NC</a></p>
</div>
<!-- end #footer --></div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42400517-1', 'www.unix-lab.org');
  ga('send', 'pageview');

</script>
</body>
</html>