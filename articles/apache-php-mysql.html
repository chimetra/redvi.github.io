<!DOCTYPE html>
<html lang="ru">
<head>
  <title>Apache+PHP+MySQL под Windows</title>
  <meta charset="utf-8">
  <meta name="description" content="Настройка Apache, PHP и MySQL под Windows.">  <meta name="author" content="redVi">  <meta name="viewport" content="initial-scale=1.0, width=device-width" />
  <link href="../theme/css/screen.css" rel="stylesheet" type="text/css" />
  <meta name='yandex-verification' content='494a81ecb0e796d6' />
  <link rel="icon" href="../favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
  <link href="../" type="application/atom+xml" rel="alternate" title="unix-lab.org ATOM Feed" />
  <link href="../feeds/rss.xml" type="application/rss+xml" rel="alternate" title="unix-lab.org RSS Feed" />
</head>
<body>
<div id="outer-wrapper">
<div id="header-wrapper">
    <a href=".."><div class="logo"></div></a>
    <div class="small">блог об операционных системах, open source и программировании</div>
<div class="nav">
        <ul>
      <li><a href="../archives.html">Архив</a></li>
      <li><a href="../about.html">О блоге</a></li>
      <li><a href="../authors.html">Экипаж</a></li>
    </ul>
</div>
</div>    <div id="main">
<h2><a href="../articles/apache-php-mysql.html">Apache+PHP+MySQL под Windows</a></h2>
<h5><i class="icon-feather"></i> 26 Май 2012 </h5>
<p>Тему о веб-серверах после опубликованных постов, где производилась установка <a href="lamp.html">LAMP на ArchLinux</a>, приводились <a href="nginx.html">настройки Nginx</a> и прочее, хотелось закрыть. Но, как оказалось, не все хотят пользоваться готовыми пакетами, где кто-то уже сделал настройки по-своему, решил за вас. Что ж, поскольку есть спрос на данную тему, а инструкций по установке всего этого комплекта 3 в одном мало или же нет вовсе, посвятим сему сегодняшний пост.</p>
<h2>Apache</h2>
<p>Скачивается с сайта: <apache.org></p>
<p><img alt="apache" src="http://4.bp.blogspot.com/-WQR3jhVhuFQ/T8DXh8wJYrI/AAAAAAAAAng/Y8V2Ig5FcfA/s1600/apache+org.png" title="apache" /></p>
<p>Установка проста до безобразия. Запускаем инсталлятор, везде жмём "Next", призадумываемся, увидев строки, где нужно вписать имя домена и т.п. Пишем банальное "localhost" и при желании свой e-mail для уведомлений.</p>
<p><img alt="http" src="http://4.bp.blogspot.com/-a7QNRFLH0SY/T8DXuB9qNQI/AAAAAAAAAno/zVe5eCNqmlc/s1600/apache.png" title="http" /></p>
<p>Как ни в чём ни бывало продолжаем установку. В финале жмём "Finish"</p>
<p><img alt="finish" src="http://4.bp.blogspot.com/-fIr5gxtMcno/T8DYQPR2aCI/AAAAAAAAAnw/esNWCZX-6PY/s1600/apache-install2.png" title="finish" /></p>
<p>После успешной установки в трее появится служба, с помощью которой можно запустить/перезапустить/остановить веб-сервер. Для этого кликаем левой кнопкой мыши и, собственно, выбираем необходимое действо. Нажатие правой кнопкой позволит перейти к сервису Apache или же отключить службу.
Доступ к службам можно получить иначе:</p>
<div class="highlight"><pre><span class="err">Панель</span> <span class="err">управления</span> <span class="o">-&gt;</span> <span class="err">Система</span> <span class="err">и</span> <span class="err">безопасность</span> <span class="o">-&gt;</span> <span class="err">Администрирование</span> <span class="o">-&gt;</span> <span class="err">Службы</span>
</pre></div>


<p><img alt="service" src="http://4.bp.blogspot.com/-tSVUz_03dQw/T8DYYiPKvjI/AAAAAAAAAoA/5tSpYx9PDUw/s1600/apache-services.png" title="service" /></p>
<p>Открываем любимый браузер, пишем в адресной строке <a href="http://localhost">http://localhost</a> и видим в зависимости от версии продукта либо страницу как на изображении ниже, либо запись "It works!". И что бы это значило? Верно, значит мы всё сделали правильно.</p>
<p><img alt="welcome" src="http://3.bp.blogspot.com/-h5dJPIxqJYE/T8DYfGYUaYI/AAAAAAAAAoI/1jCtpDVyn-o/s1600/apache+localhost4.png" title="welcome" /></p>
<p>Посмотрим, что же нужно настроить в первую очередь.</p>
<p>Идём по пути <code>C:\Program Files (x86)\Apache Group\Apache2\conf</code> (или туда, где у вас установлен Apache и лежит файл <code>httpd.conf</code>). Открываем <code>httpd.conf</code>, находим строки "The following lines prevent .htaccess and .htpasswd files from being"</p>
<p>Под ними примерно такой код:</p>
<div class="highlight"><pre><span class="nt">&lt;Directory</span> <span class="nt">/&gt;</span>
    Options FollowSymLinks
    AllowOverride None
<span class="nt">&lt;/Directory&gt;</span>
</pre></div>


<p><code>None</code> - изменить на <code>All</code>, это разрешит использование <code>.htaccess</code>, который в отличие от <code>httpd.conf</code> не требует перезапуска веб-сервера.</p>
<p>И, раз уж мы сюда зашли, давайте сразу подключим наш PHP, который сейчас будем устанавливать, дабы веб-сервер корректно обрабатывал файлы с расширением <code>.php</code> и наш код соответственно.</p>
<p>Итак, в том же <code>httpd.conf</code> находим строки <code>LoadModule</code> и где-нибудь ниже их дописываем:</p>
<div class="highlight"><pre><span class="cp">#PHP</span>
<span class="n">LoadModule</span> <span class="n">php5_module</span> <span class="s">&quot;C:/php5/php5apache2_2.dll&quot;</span>
<span class="n">AddType</span> <span class="n">application</span><span class="o">/</span><span class="n">x</span><span class="o">-</span><span class="n">httpd</span><span class="o">-</span><span class="n">php</span> <span class="p">.</span><span class="n">php</span>
<span class="n">AddType</span> <span class="n">application</span><span class="o">/</span><span class="n">x</span><span class="o">-</span><span class="n">httpd</span><span class="o">-</span><span class="n">php</span><span class="o">-</span><span class="n">source</span> <span class="p">.</span><span class="n">phps</span>

<span class="n">AddType</span> <span class="n">application</span><span class="o">/</span><span class="n">x</span><span class="o">-</span><span class="n">httpd</span><span class="o">-</span><span class="n">php</span> <span class="p">.</span><span class="n">html</span>
<span class="n">AddType</span> <span class="n">application</span><span class="o">/</span><span class="n">x</span><span class="o">-</span><span class="n">httpd</span><span class="o">-</span><span class="n">php</span> <span class="p">.</span><span class="n">htm</span>
</pre></div>


<p><b>ВНИМАНИЕ!</b> Путь <code>C:/php5/php5apache2_2.dll</code> указывает, что наш PHP будет находиться в папке <code>C:/php5</code>, учитываем это при установке. А вот какую версию php5apache подключать, зависит от того, какая версия apache у вас установлена. Чтобы не запутать читателя: Apache 2.2 - <code>php5apache2_2.dll</code>, Apache 2.3 - <code>php5apache2_3.dll</code>. Подключайте то, что необходимо вам.</p>
<h2>PHP</h2>
<p>Далее идём на сайт <a href="http://php.net/downloads.php">http://php.net/downloads.php</a> и скачиваем оттуда zip-архив с новой версией PHP.</p>
<p>Распаковываем, как условились, в <code>C:/php5</code>, предварительно создав папочку <code>php5</code>. Поскольку пути к PHP в Apache мы уже прописали, можно считать установку завершённой.  Кому нужен файл <code>php.ini</code> для тонкой настройки, идём в <code>C:/php5</code>, ищем <code>php.ini-development</code>, сохраняем его копию как <code>php.ini</code>.</p>
<p>Неплохо было бы сразу пройтись в <code>php.ini</code> и раскомментировать строки, начинающиеся с <code>;mysqli</code> и <code>musql</code>. То есть так:</p>
<div class="highlight"><pre><span class="err">было</span><span class="o">:</span> <span class="p">;</span><span class="n">mysqli</span>
<span class="err">станет</span><span class="o">:</span> <span class="n">mysqli</span>
</pre></div>


<p>Проверим работоспособность PHP на нашем сервере. В корневой папке Apache есть ещё папка - <code>htdocs</code>. Нам туда. Заметили? Здесь лежит файл <code>index.html</code>, который показывал нам, что всё работает. Напишем пару строк кода на PHP и сохраним здесь же, только как <code>index.php</code>:</p>
<div class="highlight"><pre><span class="x">&lt;html&gt;</span>
<span class="cp">&lt;?php</span>
<span class="nb">phpinfo</span><span class="p">()</span>
<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;/html&gt;</span>
</pre></div>


<p>Переходим по адресу: <a href="http://localhost/index/php">http://localhost/index/php</a></p>
<p><img alt="localhost" src="http://1.bp.blogspot.com/-4PYYfS0dyoY/T8DZvECRg-I/AAAAAAAAAoQ/jufK8sf65rU/s1600/index.png" title="localhost" /></p>
<p>Пока всё. Работоспособность нашего веб-сервера в связке с PHP не вызывает сомнений.</p>
<h2>MySQL</h2>
<p>Идём на сайт <a href="http://www.mysql.com/downloads/">http://www.mysql.com/downloads/</a>, скеачиваем версию <code>MySQL Community Server</code>. Другие в данном случае не нужны.</p>
<p>Запускаем инсталлятор. Тип установки: <code>Typical</code></p>
<p><img alt="mysql" src="http://1.bp.blogspot.com/-QWjGO7pfuOk/T8DZ87-LBYI/AAAAAAAAAoY/acMquvuxA7A/s1600/mysql.png" title="MySQL" /></p>
<p>Доходим до выбора типа конфигурации, выбираем расширенный:</p>
<p><img alt="MySQL2" src="http://1.bp.blogspot.com/-c9NwybxAQDc/T8DaCXRDjpI/AAAAAAAAAog/FNKWO4i7gXA/s1600/mysql2.png" title="MySQL type" /></p>
<p>Далее последует вопрос, для какой машины устанавливать. Выбираем машину разработчика:</p>
<p><img alt="MySQL3" src="http://4.bp.blogspot.com/-5p2AqGkBbhs/T8DaINB0HfI/AAAAAAAAAoo/XLBycae4LUE/s1600/mysql3.png" title="MySQL mashine" /></p>
<p>Языковая поддержка - мультиязычный:</p>
<p><img alt="mysql4" src="http://4.bp.blogspot.com/-YwYLFpIO7mU/T8DaNqzyQDI/AAAAAAAAAow/0WY1CVK-EyM/s1600/mysql4.png" title="MySQL database" /></p>
<p>Путь установки. По умолчанию, либо задайте свой:</p>
<p><img alt="MySQL5" src="http://2.bp.blogspot.com/-mheaCYCJBWk/T8DaTHegUNI/AAAAAAAAAo4/s7QkWQbau2I/s1600/mysql5.png" title="MySQL path" /></p>
<p>Количество подключений к серверу баз данных. По умолчанию предлагается 15-20, так и оставим:</p>
<p><img alt="MySQL6" src="http://1.bp.blogspot.com/-7NhsyDlS6K4/T8DaYZ9gBiI/AAAAAAAAApA/gY6qbN61zoo/s1600/mysql6.png" title="MySQL approximate number" /></p>
<p>Указание номера порта - стандартный - 3306, указание добавить исключение для брандмауэра и прочее:</p>
<p><img alt="mysql7" src="http://4.bp.blogspot.com/-LWj8_7E0CR4/T8DaefSwxbI/AAAAAAAAApI/eKbzam4O2eg/s1600/mysql7.png" title="MySQL tcp" /></p>
<p>Выбор языково поддержки. Убедитесь, что выставили кодировку utf-8 :</p>
<p><img alt="mysql8" src="http://3.bp.blogspot.com/-LFgFUoV7qcs/T8DakR5t5RI/AAAAAAAAApQ/RvcaTSa120Y/s1600/mysql8.png" title="MySQL utf" /></p>
<p>Установить как сервис Windows, запускать автоматически (впрочем, последнее решать вам):</p>
<p><img alt="mysql9" src="http://4.bp.blogspot.com/-3Rfp5puQMDg/T8DapXrVwvI/AAAAAAAAApY/2Fs3PTKh-M0/s1600/mysql9.png" title="MySQL server" /></p>
<p>Задать пароль для входа в БД:</p>
<p><img alt="MySQL10" src="http://1.bp.blogspot.com/-I-A0-eoq67M/T8DavjC0_aI/AAAAAAAAApg/48u66lg_fqY/s1600/mysql10.png" title="MySQL server" /></p>
<p>Готово. Позднее установим <a href="phpmyadmin.html">phpmyadmin</a> и попробуем проделать <a href="mysql-install.html">ручную установку СУБД MySQL</a> для тех, у кого зависает  инсталлятор. К несчастью, такое бывает.</p>
<h5><i class="icon-user"></i> <a href="../author/redvi.html">redVi</a>,
<i class="icon-bookmarks"></i> <a href="../tag/server.html">Server</a> /
<a href="../tag/windows.html">Windows</a> /
</h5>
<p align="center"><a href="#">наверх</a></p>
</div>
<div id="footer-wrapper">
<ul class="footer">
       <li class="footer"><a href="../tag/android.html">Android&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/arch.html">Arch&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/blog.html">Blog&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/debian.html">Debian&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/decorations.html">Decorations&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/django.html">Django&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/editors.html">Editors&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/gentoo.html">Gentoo&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/git.html">Git&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/javascript.html">JavaScript&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/kernel.html">Kernel&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/latex.html">LaTeX&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/python.html">Python&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/server.html">Server&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/web.html">Web&nbsp;&bull;&nbsp;</a></li>
       <li class="footer"><a href="../tag/windows.html">Windows&nbsp;&bull;&nbsp;</a></li>
  </ul>
<br/><p>&copy;&nbsp;2011&mdash;2013&nbsp;&bull;&nbsp;<a href="..">unix-lab.org </a>&nbsp;&bull;&nbsp;powered by <a href="https://github.com/getpelican">pelican</a>&nbsp;&bull;&nbsp;<a href="http://creativecommons.org/licenses/by-nc/3.0/deed.ru">CC BY-NC</a></p>
</div>
<!-- end #footer --></div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42400517-1', 'www.unix-lab.org');
  ga('send', 'pageview');

</script>
</body>
</html>