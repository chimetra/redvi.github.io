---
layout: post
title: i2p: взгляд пользователя
date: 2013-07-31 21:10
tags: Web
slug: i2p
author: Anarchist
summary: О том, как выжить в современном интернете. Открываем доступ к заблокированным сайтам с помощью i2p.
---

Пользователю что нужно?

Чтобы работало :)

<u>Вменяемому</u> пользователю что нужно?

Помимо вышесказанного &mdash; понимание (хотя бы в общих чертах), <u>как</u> оно работает.

## Краткое описание

Сеть высшего порядка (надстройка прикладного уровня над этими вашими интернетами). Использующая альтернативный традиционному (DNS) механизм трансляции имён: [вспоминаем простейший способ блокировки неугодного ресурса](http://www.flibusta.net/node/161279).

Данные передаются между узлами сети. При этом выделяемая для транзитного трафика полоса предопределяется пользователем (чем больше транзита &mdash; тем сложнее выделить/идентифицировать трафик, инициируемый непосредственно узлом).

Разработка решала задачу повышения интересности бытия группам лиц, заинтересованным в блокировке доступа к неугодному ресурсу.

Как всегда, решение далеко небесплатно. Расплачиваться придётся как полосой пропускания, так и транзитным трафиком (для тех, кто не сидит на безлимитном канале может оказаться важно).

Ограничений по требованию к скорости канала для того, чтобы система работала мне не известно (но вопрос стоит проработать).

Также необходимо помнить, что ни от злоумышленника на стороне сервера (например фишинговый ресурс), ни от локальных вирусов (пользователи альтернативной ОС обычно благополучно избегают знания, что антивирус является главным вирусом в системе).

В любом случае (надстройка, да с цепочкой транзитных узлов &mdash; следовательно задержки) работает заметно медленнее привычного интернета.

Сервисы (помимо http) живут разные. Не разворачиваю, ибо в данном контексте они не интересны.

Воспользуясь послезнанием скажу пару слов о реализации: написано на жабе (что не добавляет скорости).

Узел сети &mdash; самостоятельное приложение (или демон), работающее в качестве прокси-сервера, осуществляющего маршрутизацию http-запросов в i2p-сеть и обратную трансляцию получаемых пакетов.
Вопросы настройки публичного узла доступа в i2p-сеть (безопасности) здесь рассматривать не буду (простому пользователю нет дела до того, что выходит за рамки localhost'а).

## Поиск/установка i2p-прокси сервера

`eix-remote` в помощь.

Строка поиска (сюрприз): `"i2p"`.

Также можно воспользоваться web-мордой поиска: <http://gpo.zugaina.org/>

Ответ уникален:

```console
[I] net-p2p/i2p [1]
Available versions: ~0.6.2 ~0.6.5 ~0.7 ~0.7.1 ~0.7.2 ~0.7.3 ~0.7.5
Installed versions: 0.8.8(18:16:27 20.05.2012)(initscript -elibc_FreeBSD)
Homepage: http://www.i2p.net/
Description: I2P is an anonymous network, exposing a simple layer that applications can use to anonymously and securely send messages to each other.
```

Инструкция по установке традиционно у Вики.
После добавления оверлея и (при необходимости) размаскировки устанавливается стандартно:

```console
# emerge net-p2p/i2p
```

Все необходимые зависимости скачиваются и устанавливаются автоматически, пользователям альтернативной ОС взирать и завидовать, пользователям других дистрибутивов установить стандартным для данного дистрибутива образом.

Лично я предпочитаю вариант установки с стартовым скриптом. Но можно запускать прокси и любым другим способом.

## Настройка i2p-маршрутизатора (узла сети)

Запуск осуществляктся командой:

```console
$ i2prouter start
```

Административная консоль живёт по адресу <http://localhost:7657/index.jsp> (необходимой и достаточной мерой безопасности полагаю запрет подключения с адресов отличных от локалхоста).

![img1](http://cdn.flibusta.net/sites/default/files/i2p_router_console.png)

К настройке отмечу куцесть и недостаточность умолчательной подписки. Полагаю достаточным (и даже избыточным) унесёный с одной из предыдущих инструкций список. Url соответствующей страницы в административной консоли:

<http://localhost:7657/susidns/subscriptions.jsp>

И собственно подписки (сюда же включена и умолчательная):

- http://www.i2p2.i2p/hosts.txt
- http://i2host.i2p/cgi-bin/i2hostetag
- http://stats.i2p/cgi-bin/newhosts.txt
- http://tino.i2p/hosts.txt
- http://dream.i2p/hosts.txt
- http://hosts.i2p/
- http://biw5iauxm7cjkakqygod3tq4w6ic4zzz5mtd4c7xdvvz54fyhnwa.b32.i2p/unce...
- http://trevorreznik.i2p/hosts.txt
- http://cipherspace.i2p/addressbook.txt
- http://hosts.i2p/hosts.cgi?filter=all
- http://bl.i2p/hosts2.txt
- http://rus.i2p/hosts.txt
- http://inr.i2p/export/alive-hosts.txt

Остаётся только отметить наши адреса:

```
http://flibusta.i2p
http://zmw2cyw2vj7f6obx3msmdvdepdhnw2ctc4okza2zjxlukkdfckhq.b32.i2p
```

(запишите в закладки)

И то, что настоящий момент фича выключена.

...и проверить конфигурацию пакетного фильтра.

Порты можно задавать достаточно произвольно в административной консоли. Умолчательный ЕМНИП `30445`. Используются оба протокола (tcp и udp).

## Завершающим этапом настройка клиента (браузера)

В случае FireFox решается установкой соответствующего расширения.

Например, [FoxyProxy Standard](https://addons.mozilla.org/en-US/firefox/addon/foxyproxy-standard/) (случай, описываемый мной, в меру мутный, ибо за часть режимов уже закономерно хотят денег, по идее должно хватить и [FoxyProxy Basic](https://addons.mozilla.org/en-US/firefox/addon/foxyproxy-basic/)).

Вообще-то настройка подключения разобрана в ЧаВо i2p, но перескажу.

В настройках PoxyProxy добавить прокси-сервер `localhost i2p router`. На первой вкладке настроек проставить включение прокси-сервера и запрет на использование системного DNS для разрешения имён (всё равно i2p в стандартном DNS отсуствует).

![img2](http://cdn.flibusta.net/sites/default/files/foxyproxy_common.png)

На второй вкладке указать адрес и порт подключения (`localhost` и `4444` соответственно).

![img3](http://cdn.flibusta.net/sites/default/files/foxyproxy_connection.png)

На третьей вкладке проставить запрет использования прокси для локальных адресов и задать шаблон белого списка:

`*.i2p/*`

![img3](http://cdn.flibusta.net/sites/default/files/foxyproxy_filter.png)

Собственно, всё.

Теперь доступ в i2p-сеть работает.

Можно проверить посредством обращения например на адрес (из стандартных) <http://www.i2p2.i2p/>

Для более-менее нормальной работы с произвольным (из известных) узлом i2p-сети нужно дать маршрутизатору время на интеграцию в Сети (по моим оценкам двух-трёх суток более чем достаточно, цифры, характеризующие степень интеграции, можно увидеть на консоли маршрутизатора).

<b>Update:</b> Начиная с определённого уровня интеграции в сети (i2p) можно использовать эту сеть для доступа и к обычным ресурсам.

Например, если к списку шаблонов маршрутизации добавить:

```
*proxy.flibusta.net/*
```

То запросы к альтернативному адресу Ф. (не i2p (т.е. eepsite) -сайт, а обычный сайт в обычных интернетах) будут использовать в качестве транспорта i2p-сеть.

**Примечание от redVi:**

> Укажу на более лёгкий путь: зачастую достаточно установить браузер TOR. Для пользователей linux инструкция сводится буквально к двум шагам:
> Перво-наперво идём на [страницу проекта](https://www.torproject.org/) и скачиваем последнюю версию браузера.

> А затем распаковываем скачанный архив и в консоли набираем команду:

> $ sh start-tor-browser

> После чего запустится приветственное окно и, спустя несколько секунд, откроется сам браузер. Анонимно? Ну, по крайней мере можно безпрепятственно посещать закрытые нашими вездесущими законописателями сайты и не светить ip-адрес. Для примера можете зайти на яндекс: пытаясь определить место вашей дислокации, он покажет вам погоду... в Германии ;)
