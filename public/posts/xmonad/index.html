<!DOCTYPE html>
<html lang="ru">
<head>

  <title>Знакомьтесь, xmonad | UNIX-LAB.ORG</title>
  <meta name="description" content="Установка, настройка и сипользование оконного менеджера Xmonad">

  <meta charset="utf-8">
  <meta name="author" content="redVi">
  <meta name='yandex-verification' content='494a81ecb0e796d6' />
  <meta name="viewport" content="initial-scale=1.0, width=device-width" />
  <link rel="icon" href="http://www.unix-lab.org/favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="http://www.unix-lab.org/favicon.ico" type="image/x-icon">
  <link href="http://www.unix-lab.org/assets/stylesheets/screen.css" rel="stylesheet" type="text/css" />
  <link rel="alternate" type="application/atom+xml" title="UNIX-LAB.ORG" href="http://www.unix-lab.org/feeds/atom.xml">
  <link rel="alternate" type="application/rss+xml" title="UNIX-LAB.ORG" href="http://www.unix-lab.org/feeds/rss.xml">
</head>
<body>
<div id="outer-wrapper">
<div id="header-wrapper">
    <a href="/"><div class="logo"></div></a>
    <div class="small">блог об операционных системах, open source и программировании</div>
<div class="nav">
  <ul>
    <li><a href="/archive/">Архив</a></li>
    <li><a href="/about/">О блоге</a></li>
    <li><a href="/author/">Автор</a></li>
  </ul>
</div>
</div>

<div id="main">
<h2>Знакомьтесь, xmonad</h2>
<h5><i class="icon-feather"></i> 23 октября 2012

 <i class="icon-bookmarks"></i>

<a href="/tags/decorations.html">Decorations /</a>

<a href="/tags/linux.html">Linux /</a>

</h5>

<h2 id="toc_0">Вступление</h2>

<p>Xmonad &mdash; фреймовый оконный менеджер, написанный на языке Haskell. Для приведения его к рабочему состоянию знать haskell совсем не обязательно, хотя уж точно не помешает. Об этом менеджере окон можно говорить очень долго, но пост предназначен по большей части для опытных пользователей и не ставит в круг своих задач объяснение простых истин.</p>

<p>Возгласы &quot;я не новичок, но всё равно ничего не понял!&quot; без рассмотрения отправляются в <code>/dev/null</code>. Тема достаточно объёмная и содержит несколько новых понятий, лучше объяснить не смогу.</p>

<h2 id="toc_1">Начали:</h2>

<h3 id="toc_2">Как запустить?</h3>

<p>Мы не сможем найти то, что ищем либо в репозитории community, либо в Arch User Repository. Пример того, как ставятся пакеты из AUR:</p>
<div class="highlight"><pre><code class="console language-console" data-lang="console"><span class="gp">$</span> sudo yaourt -S xmonad xmonad-contirb
</code></pre></div>
<p>Вооружаемся каким-либо текстовым редактором (желательно с подсветкой синтаксиса) и приступаем к созданию xmonad.desktop: дело в том, что xmonad не добавится автоматически к вашему DM - прописываем вручную.</p>
<div class="highlight"><pre><code class="sh language-sh" data-lang="sh"><span class="c"># /usr/share/xsessions/xmonad.desktop:</span>

<span class="o">[</span>Desktop Entry<span class="o">]</span>
<span class="nv">Encoding</span><span class="o">=</span>UTF-8
<span class="nv">Name</span><span class="o">=</span>xmonad/&gt;
<span class="nv">Comment</span><span class="o">=</span>This session starts xmonad
<span class="nv">Exec</span><span class="o">=</span>/usr/bin/xmonad
<span class="nv">Type</span><span class="o">=</span>Application
</code></pre></div>
<p>Теперь при запуске с *DM (KDM, GDM, etc) появится выбор нашего рабочего окружения
Пока оно представляет собой... да, чистый рабочий стол. Минимализм во все поля.
Если для запуска вы используете <code>.xinitrc</code>, пропишите туда и xmonad.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">myStartupHook = do
    spawn &quot;~/.xmonad/startup.sh&quot;
</code></pre></div>
<p>Кстати-----------------------------------------------</p>

<p>Дефолтный файл конфигурации входит в состав xmonad. Можно скопировать его и отредактировать под свои нужды.</p>
<div class="highlight"><pre><code class="console language-console" data-lang="console"><span class="gp">$</span> cp /usr/share/xmonad-0.10/man/xmonad.hs ~/.xmonad/
</code></pre></div>
<p>Если вдруг у вас не будет привилегий на редактирование файла, смените владельца и группу на свои:</p>
<div class="highlight"><pre><code class="console language-console" data-lang="console"><span class="gp">$</span> sudo chown your_user xmonad.hs
<span class="gp">$</span> sudo chown :users xmonad.hs
</code></pre></div>
<h3 id="toc_3">Автозапуск программ</h3>

<p>Что ж, давайте хотя бы прозрачность настроим. Для этого нужно стартовать при запуске графической среды compton, а как настроить этот самый запуск?</p>
<div class="highlight"><pre><code class="console language-console" data-lang="console"><span class="gp">$</span> vim .xmonad/xmonad.hs:
<span class="gp">$</span> mkdir .xmonad
<span class="gp">$</span> vim .xmonad/startup.sh

<span class="go">export LANG=ru_RU.UTF-8</span>
<span class="go">export MM_CHARSET=UTF-8</span>
<span class="go">setxkbmap -layout &#39;us,ru&#39; -option &#39;grp:alt_shift_toggle, grp_led:caps&#39;</span>
<span class="go">xsetroot -cursor_name left_ptr</span>
<span class="go">nitrogen --restore</span>
<span class="go">xfce4-power-manager &amp;</span>
<span class="go">xfce4-volumed &amp;</span>
<span class="go">xfce4-notifyd &amp;</span>
<span class="go">xxkb &amp;</span>
<span class="go">trayer -c &amp;</span>
<span class="go">compton &amp;</span>
</code></pre></div>
<p>Как вы, должно быть, заметили в автозапуск добавлены элементы xfce. Они весят совсем немного, весь xfce ставить не требуют, зато значительно повышают комфортабельность работы. Например, notifyd будет оповещать нас о различных событиях:</p>

<p><img src="http://4.bp.blogspot.com/-lp6MTNSzwts/UIOWbjm2tnI/AAAAAAAAB8s/ziCGIMDonlQ/s1600/xfce4-notifyd.png" alt="xfce-notyfyd"></p>

<p>Внимание! После любого изменения <code>xmonad.hs</code> нужно его скомпилировать, чтобы увидеть изменения:</p>
<div class="highlight"><pre><code class="console language-console" data-lang="console"><span class="gp">$</span> xmonad --recompile
<span class="gp">$</span> xmonad --restart
</code></pre></div>
<p>Так уже лучше, верно? Мы указали, что являемся русскоязычными пользователями (<code>LANG=ru.RU</code>), включили переключение раскладок клавиатуры (<code>setxkbmap -layout</code>) и запустили несколько иных программ. Это по желанию. Подразумевается, что соответствующие программы у вас установлены. Если нет, просмотрите заметку о настройке openbox, где объясняется, какая программа за что отвечает.</p>

<p>Неплохо было бы сразу заставить работать мультимедийные клавиши. Здесь нам пригодится уже упомянутая <a href="http://www.unix-lab.org/posts/openbox/">в заметке про openbox</a> программка xmodmap.</p>

<h3 id="toc_4">Расположение окон</h3>

<p>В файле <code>.xmonad.hs</code></p>
<div class="highlight"><pre><code class="haskell language-haskell" data-lang="haskell"><span class="kr">import</span> <span class="nn">XMonad.Layout.Circle</span>
<span class="kr">import</span> <span class="nn">XMonad.Layout.Spacing</span>
<span class="nf">myWorkspaces</span> <span class="ow">=</span> <span class="p">[</span><span class="s">&quot;1:main&quot;</span><span class="p">,</span><span class="s">&quot;2:net&quot;</span><span class="p">,</span><span class="s">&quot;3:work&quot;</span><span class="p">,</span><span class="s">&quot;4:media&quot;</span><span class="p">]</span>  <span class="o">++</span> <span class="n">map</span> <span class="n">show</span> <span class="p">[</span><span class="mi">5</span><span class="o">..</span><span class="mi">9</span><span class="p">]</span>
<span class="nf">myLayout</span> <span class="ow">=</span> <span class="n">tiled</span> <span class="o">|||</span> <span class="kt">Mirror</span> <span class="n">tiled</span> <span class="o">|||</span> <span class="kt">Full</span> <span class="o">|||</span> <span class="kt">Circle</span>
    <span class="kr">where</span>
        <span class="c1">-- default tiling algorithm partitions the screen into two panes</span>
        <span class="n">tiled</span> <span class="ow">=</span> <span class="n">spacing</span> <span class="mi">5</span> <span class="o">$</span> <span class="kt">Tall</span> <span class="n">nmaster</span> <span class="n">delta</span> <span class="n">ratio</span>
        <span class="c1">-- The default number of windows in the master pane</span>
        <span class="n">nmaster</span> <span class="ow">=</span> <span class="mi">1</span>
        <span class="c1">-- Default proportion of screen occupied by master pane</span>
        <span class="n">ratio</span> <span class="ow">=</span> <span class="mi">2</span><span class="o">/</span><span class="mi">3</span>
        <span class="c1">-- Percent of screen to increment by when resizing panes</span>
        <span class="n">delta</span> <span class="ow">=</span> <span class="mi">5</span><span class="o">/</span><span class="mi">100</span>
</code></pre></div>
<p>Full - в полный экран
Tall - экран делится на две части горизонтально
Mirror Tall - экран делится на две части вертикально
Circle - небольшие плавающие окна</p>

<p>Вот так выглядит компоновка Tall</p>

<p><a href="http://farm8.staticflickr.com/7341/9260866503_17a1b961c2_b.jpg" data-lighter><img src="http://farm8.staticflickr.com/7341/9260866503_17a1b961c2_b.jpg"/></a></p>

<p>Как привязать рабочий стол к определённой компоновке?</p>
<div class="highlight"><pre><code class="haskell language-haskell" data-lang="haskell"><span class="nf">defaultLayouts</span> <span class="ow">=</span> <span class="n">tiled</span> <span class="o">|||</span> <span class="kt">Mirror</span> <span class="n">tiled</span> <span class="o">|||</span> <span class="kt">Full</span> <span class="p">(</span><span class="err">и</span> <span class="err">прочее</span><span class="p">,</span> <span class="err">и</span> <span class="err">так</span> <span class="err">далее</span><span class="p">)</span>
<span class="nf">myLayout</span> <span class="ow">=</span> <span class="n">onWorkspace</span> <span class="s">&quot;1:main&quot;</span> <span class="kt">Circle</span>  <span class="o">$</span> <span class="n">onWorkspace</span> <span class="s">&quot;2:net&quot;</span> <span class="kt">Full</span> <span class="o">$</span> <span class="n">onWorkspace</span> <span class="s">&quot;3:work&quot;</span> <span class="n">simpleTabbed</span> <span class="o">$</span> <span class="n">defaultLayouts</span>
<span class="nf">myWorkspaces</span>  <span class="ow">=</span> <span class="p">[</span><span class="s">&quot;1:main&quot;</span><span class="p">,</span><span class="s">&quot;2:net&quot;</span><span class="p">,</span><span class="s">&quot;3:work&quot;</span><span class="p">,</span><span class="s">&quot;4:media&quot;</span><span class="p">]</span>  <span class="o">++</span> <span class="n">map</span> <span class="n">show</span> <span class="p">[</span><span class="mi">5</span><span class="o">..</span><span class="mi">9</span><span class="p">]</span>
<span class="nf">main</span> <span class="ow">=</span> <span class="kr">do</span>
    <span class="n">xmproc</span> <span class="ow">&lt;-</span> <span class="n">spawnPipe</span> <span class="s">&quot;/usr/bin/xmobar /home/arch/.xmobarrc&quot;</span>
    <span class="n">xmonad</span> <span class="o">$</span> <span class="n">defaultConfig</span><span class="p">{</span>
    <span class="n">workspaces</span>  <span class="ow">=</span> <span class="n">myWorkspaces</span>
    <span class="p">,</span> <span class="n">layoutHook</span> <span class="ow">=</span>  <span class="n">avoidStruts</span> <span class="o">$</span> <span class="n">myLayout</span>
    <span class="p">}</span>
</code></pre></div>
<p>Теперь при входе наши компоновки уже назначены:</p>

<ul>
<li><p>рабочий стол 1:main  -  компоновка Circle</p></li>
<li><p>рабочий стол 2:net - компоновка Full</p></li>
</ul>

<p>и так далее</p>

<h3 id="toc_5">Горячие клавиши</h3>

<p>Поскольку у автора сочетания завязаны на клавишу <code>win</code> (которую теперь можно смело заменить наклейкой с надписью &quot;xmonad&quot;) - <code>modMask = mod4Mask</code> в <code>xmonad.sh</code>, то и сочетания клавиш соответствующие.</p>

<p>По умолчанию стоит другая комбинация <code>modMask = mod1Mask</code> - это левый alt.</p>

<p>Сочетание клавиш:</p>

<ul>
<li><code>win + 1, win + 2, win + 3</code> - переход на рабочие столы.</li>
<li><code>win + space</code> - переключение компоновки рабочего стола (то есть то, как располагаются окна: Full, Circle...)</li>
<li><code>win + Tab</code> - переключение между окнами</li>
<li><code>win + левый клик</code> - перемещение окна</li>
<li><code>win + shift + c</code> - закрыть окно</li>
<li><code>win + shift + k</code> - поменять местами окно в фокусе и мастер-окно</li>
<li><code>win + shift + p</code> - запустить то или иное приложение</li>
<li><code>win + shift + q</code> - выйти из xmonad</li>
</ul>

<p>Далее те горячие клавиши, которые настроит пользователь.</p>

<p>В полном конфигурационном файле, представленном ниже, это секция</p>
<div class="highlight"><pre><code class="haskell language-haskell" data-lang="haskell"><span class="nf">additionalKeys</span><span class="p">,</span>
    <span class="p">[,</span> <span class="p">((</span><span class="n">mod4Mask</span><span class="p">,</span> <span class="n">xK_Return</span><span class="p">),</span> <span class="n">spawn</span> <span class="s">&quot;konsole&quot;</span><span class="p">)</span>
    <span class="p">,</span> <span class="p">((</span><span class="n">mod4Mask</span><span class="p">,</span> <span class="n">xK_b</span><span class="p">),</span> <span class="n">spawn</span> <span class="s">&quot;chromium&quot;</span><span class="p">)]</span>
</code></pre></div>
<p>То есть <code>win + Return</code>, <code>win + b</code> и так далее. Формат записи: ((кнопка маскировки, xK_клавиша), spawn &quot;приложение&quot;)</p>

<h3 id="toc_6">Прикручиваем xmobar</h3>
<div class="highlight"><pre><code class="haskell language-haskell" data-lang="haskell"><span class="o">#</span> <span class="o">.</span><span class="n">xmobarrc</span><span class="kt">:</span>

<span class="kt">Config</span> <span class="p">{</span> <span class="n">font</span> <span class="ow">=</span> <span class="s">&quot;-*-terminus-bold-r-*-*-14-*-*-*-*-*-*-*&quot;</span>
    <span class="p">,</span> <span class="n">bgColor</span> <span class="ow">=</span> <span class="s">&quot;black&quot;</span>
    <span class="p">,</span> <span class="n">fgColor</span> <span class="ow">=</span> <span class="s">&quot;grey&quot;</span>
    <span class="p">,</span> <span class="n">position</span> <span class="ow">=</span> <span class="kt">TopW</span> <span class="kt">L</span> <span class="mi">100</span>
    <span class="p">,</span> <span class="n">commands</span> <span class="ow">=</span> <span class="p">[</span> <span class="kt">Run</span> <span class="kt">Cpu</span> <span class="p">[</span><span class="s">&quot;-L&quot;</span><span class="p">,</span><span class="s">&quot;3&quot;</span><span class="p">,</span><span class="s">&quot;-H&quot;</span><span class="p">,</span><span class="s">&quot;50&quot;</span><span class="p">,</span><span class="s">&quot;--normal&quot;</span><span class="p">,</span><span class="s">&quot;green&quot;</span><span class="p">,</span><span class="s">&quot;--high&quot;</span><span class="p">,</span><span class="s">&quot;red&quot;</span><span class="p">]</span> <span class="mi">10</span>
        <span class="p">,</span> <span class="kt">Run</span> <span class="kt">Memory</span> <span class="p">[</span><span class="s">&quot;-t&quot;</span><span class="p">,</span><span class="s">&quot;Mem: &lt;usedratio&gt;%&quot;</span><span class="p">]</span> <span class="mi">10</span>
        <span class="p">,</span> <span class="kt">Run</span> <span class="kt">Swap</span> <span class="kt">[]</span> <span class="mi">10</span>
        <span class="p">,</span> <span class="kt">Run</span> <span class="kt">Date</span> <span class="s">&quot;%a %b %_d %l:%M&quot;</span> <span class="s">&quot;date&quot;</span> <span class="mi">10</span>
        <span class="p">,</span> <span class="kt">Run</span> <span class="kt">StdinReader</span>
            <span class="p">]</span>
    <span class="p">,</span> <span class="n">sepChar</span> <span class="ow">=</span> <span class="s">&quot;%&quot;</span>
    <span class="p">,</span> <span class="n">alignSep</span> <span class="ow">=</span> <span class="s">&quot;}{&quot;</span>
    <span class="p">,</span> <span class="n">template</span> <span class="ow">=</span> <span class="s">&quot;%StdinReader% }{ %cpu% | %memory% * %swap%  &lt;fc=#ee9a00&gt;%date%&lt;/fc&gt;&quot;</span>
    <span class="p">}</span>
</code></pre></div>
<p>xmobar будет иметь чёрный цвет, располагаться вверху, показывать нам заголовок открытого на данный момент окна и используемую компоновку рабочего стола, а также наименование рабочего стола.</p>

<p>В файле <code>.xmonad.hs</code> это строки:</p>
<div class="highlight"><pre><code class="haskell language-haskell" data-lang="haskell"><span class="kr">import</span> <span class="nn">XMonad.Hooks.ManageDocks</span>
<span class="kr">import</span> <span class="nn">XMonad.Util.Run</span><span class="p">(</span><span class="n">spawnPipe</span><span class="p">)</span>
<span class="nf">main</span> <span class="ow">=</span> <span class="kr">do</span>
    <span class="n">xmproc</span> <span class="ow">&lt;-</span> <span class="n">spawnPipe</span> <span class="s">&quot;/usr/bin/xmobar ~/.xmobarrc&quot;</span>
<span class="p">{</span> <span class="n">manageHook</span> <span class="ow">=</span> <span class="n">manageDocks</span> <span class="o">&lt;+&gt;</span> <span class="n">manageHook</span> <span class="n">defaultConfig</span>
<span class="p">,</span> <span class="n">layoutHook</span> <span class="ow">=</span>  <span class="n">avoidStruts</span> <span class="o">$</span> <span class="n">myLayout</span> <span class="c1">-- avoidStruts чтобы окна --не загораживали xmobar</span>
<span class="p">{</span> <span class="n">ppOutput</span> <span class="ow">=</span> <span class="n">hPutStrLn</span> <span class="n">xmproc</span>
            <span class="p">,</span> <span class="n">ppTitle</span> <span class="ow">=</span> <span class="n">xmobarColor</span> <span class="s">&quot;green&quot;</span> <span class="s">&quot;&quot;</span> <span class="o">.</span> <span class="n">shorten</span> <span class="mi">50</span>
                <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="toc_7">Trayer</h3>

<p>Небольшой симпатичный трей. В примере имеет ширину 60% экрана, расположен внизу по центру.
В файл <code>.xmonad/startup.sh</code> добавьте строки:</p>
<div class="highlight"><pre><code class="console language-console" data-lang="console"><span class="gp">$</span> trayer --edge bottom --align center --SetDockType <span class="nb">true</span> --SetPartialStrut <span class="nb">true</span> --expand <span class="nb">true</span> --width 60 --height 10 --transparent <span class="nb">true</span> --tint 0x000000 &amp;
</code></pre></div>
<h2 id="toc_8">В заключение:</h2>

<p>Для нетерпеливых. Файл <code>.xmonad.hs</code>  (или стянуть <a href="https://github.com/redVi/dotfiles/blob/master/xmonad/xmonad.hs">отсюда</a>)</p>
<div class="highlight"><pre><code class="haskell language-haskell" data-lang="haskell"><span class="kr">import</span> <span class="nn">XMonad</span>
<span class="kr">import</span> <span class="nn">XMonad.Hooks.DynamicLog</span>
<span class="kr">import</span> <span class="nn">XMonad.Hooks.ManageDocks</span>
<span class="kr">import</span> <span class="nn">XMonad.Util.Run</span><span class="p">(</span><span class="n">spawnPipe</span><span class="p">)</span>
<span class="kr">import</span> <span class="nn">XMonad.Util.EZConfig</span><span class="p">(</span><span class="n">additionalKeys</span><span class="p">)</span>
<span class="kr">import</span> <span class="nn">System.IO</span>
<span class="kr">import</span> <span class="nn">XMonad.Layout.PerWorkspace</span> <span class="p">(</span><span class="nf">onWorkspace</span><span class="p">)</span>
<span class="kr">import</span> <span class="nn">XMonad.Layout.SimplestFloat</span>
<span class="kr">import</span> <span class="nn">XMonad.Layout.Circle</span>
<span class="kr">import</span> <span class="nn">XMonad.Layout.ThreeColumns</span>
<span class="kr">import</span> <span class="nn">XMonad.Layout.Tabbed</span>
<span class="kr">import</span> <span class="nn">XMonad.Layout.Accordion</span>
<span class="kr">import</span> <span class="nn">XMonad.Layout.Grid</span>
<span class="kr">import</span> <span class="nn">XMonad.Layout.IM</span>
<span class="kr">import</span> <span class="nn">Data.Ratio</span> <span class="p">((</span><span class="o">%</span><span class="p">))</span>
<span class="kr">import</span> <span class="nn">XMonad.Hooks.EwmhDesktops</span>
<span class="kr">import</span> <span class="k">qualified</span> <span class="nn">XMonad.StackSet</span> <span class="k">as</span> <span class="n">W</span>
<span class="kr">import</span> <span class="k">qualified</span> <span class="nn">Data.Map</span> <span class="k">as</span> <span class="n">M</span>
<span class="kr">import</span> <span class="nn">Data.Monoid</span>
<span class="kr">import</span> <span class="nn">System.Exit</span>
<span class="kr">import</span> <span class="nn">XMonad.Layout.Spacing</span>

<span class="nf">myWorkspaces</span> <span class="ow">=</span> <span class="p">[</span><span class="s">&quot;1:main&quot;</span><span class="p">,</span><span class="s">&quot;2:net&quot;</span><span class="p">,</span><span class="s">&quot;3:work&quot;</span><span class="p">,</span><span class="s">&quot;4:media&quot;</span><span class="p">,</span> <span class="s">&quot;5:chat&quot;</span> <span class="p">]</span> <span class="o">++</span> <span class="n">map</span> <span class="n">show</span> <span class="p">[</span><span class="mi">6</span><span class="o">..</span><span class="mi">9</span><span class="p">]</span>
<span class="nf">myLayout</span> <span class="ow">=</span> <span class="n">onWorkspace</span> <span class="s">&quot;5:chat&quot;</span> <span class="n">pidginLayout</span> <span class="o">$</span> <span class="n">onWorkspace</span> <span class="s">&quot;1:main&quot;</span> <span class="kt">Circle</span> <span class="o">$</span> <span class="n">onWorkspace</span> <span class="s">&quot;2:net&quot;</span> <span class="kt">Full</span> <span class="o">$</span> <span class="n">onWorkspace</span> <span class="s">&quot;3:work&quot;</span> <span class="n">simpleTabbed</span> <span class="o">$</span> <span class="n">defaultLayouts</span>
<span class="c1">--myNormalBorderColor = &quot;#808080&quot;</span>
<span class="c1">--myFocusedBorderColor = &quot;#414141&quot;</span>
<span class="nf">myFocusedBorderColor</span> <span class="ow">=</span> <span class="s">&quot;#395573&quot;</span>
<span class="nf">myNormalBorderColor</span> <span class="ow">=</span> <span class="s">&quot;#0080ff&quot;</span>
<span class="nf">myTerm</span> <span class="ow">=</span> <span class="s">&quot;konsole&quot;</span>
<span class="nf">myBorderWidth</span> <span class="ow">=</span> <span class="mi">2</span>
<span class="nf">myStartupHook</span> <span class="ow">=</span> <span class="n">spawn</span> <span class="s">&quot;~/.xmonad/startup.sh&quot;</span>
<span class="nf">myManageHook</span> <span class="ow">=</span> <span class="n">composeAll</span>
    <span class="p">[</span> <span class="n">className</span> <span class="o">=?</span> <span class="s">&quot;MPlayer&quot;</span> <span class="o">--&gt;</span> <span class="n">doFloat</span>
    <span class="p">,</span> <span class="n">className</span> <span class="o">=?</span> <span class="s">&quot;Eclipse&quot;</span> <span class="o">--&gt;</span> <span class="n">doFloat</span>
    <span class="p">,</span> <span class="n">className</span> <span class="o">=?</span> <span class="s">&quot;Eidete&quot;</span> <span class="o">--&gt;</span> <span class="n">doFloat</span>
    <span class="p">,</span> <span class="n">className</span> <span class="o">=?</span> <span class="s">&quot;Gimp&quot;</span> <span class="o">--&gt;</span> <span class="n">doFloat</span>
    <span class="p">,</span> <span class="n">className</span> <span class="o">=?</span> <span class="s">&quot;Pidgin&quot;</span> <span class="o">--&gt;</span> <span class="n">doShift</span> <span class="s">&quot;5:chat&quot;</span>
    <span class="p">,</span> <span class="n">className</span> <span class="o">=?</span> <span class="s">&quot;Pidgin&quot;</span> <span class="o">--&gt;</span> <span class="n">doFloat</span>
    <span class="p">,</span> <span class="n">className</span> <span class="o">=?</span> <span class="s">&quot;arch - Skype™ (Beta)&quot;</span> <span class="o">--&gt;</span> <span class="n">doFloat</span>
    <span class="p">,</span> <span class="n">className</span> <span class="o">=?</span> <span class="s">&quot;arch - Skype™ (Beta)&quot;</span> <span class="o">--&gt;</span> <span class="n">doShift</span> <span class="s">&quot;5:chat&quot;</span>
    <span class="p">,</span> <span class="n">className</span> <span class="o">=?</span> <span class="s">&quot;Ktorrent&quot;</span> <span class="o">--&gt;</span> <span class="n">doShift</span> <span class="s">&quot;1:main&quot;</span><span class="p">]</span>

<span class="nf">defaultLayouts</span> <span class="ow">=</span> <span class="n">tiled</span> <span class="o">|||</span> <span class="kt">Mirror</span> <span class="n">tiled</span> <span class="o">|||</span> <span class="kt">Full</span> <span class="o">|||</span> <span class="kt">Circle</span> <span class="o">|||</span> <span class="n">simpleTabbed</span> <span class="o">|||</span> <span class="kt">ThreeCol</span> <span class="mi">1</span> <span class="p">(</span><span class="mi">3</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">|||</span> <span class="kt">ThreeColMid</span> <span class="mi">1</span> <span class="p">(</span><span class="mi">3</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">|||</span> <span class="kt">Accordion</span> <span class="o">|||</span> <span class="kt">Grid</span>
<span class="kr">where</span>
    <span class="c1">-- default tiling algorithm partitions the screen into two panes</span>
    <span class="n">tiled</span> <span class="ow">=</span> <span class="n">spacing</span> <span class="mi">5</span> <span class="o">$</span> <span class="kt">Tall</span> <span class="n">nmaster</span> <span class="n">delta</span> <span class="n">ratio</span>

    <span class="c1">-- The default number of windows in the master pane</span>
    <span class="n">nmaster</span> <span class="ow">=</span> <span class="mi">1</span>
    <span class="n">nmaster2</span> <span class="ow">=</span> <span class="mi">2</span>

    <span class="c1">-- Default proportion of screen occupied by master pane</span>
    <span class="n">ratio</span> <span class="ow">=</span> <span class="mi">2</span><span class="o">/</span><span class="mi">3</span>

    <span class="c1">-- Percent of screen to increment by when resizing panes</span>
    <span class="n">delta</span> <span class="ow">=</span> <span class="mi">3</span><span class="o">/</span><span class="mi">100</span>
<span class="nf">gridLayout</span> <span class="ow">=</span> <span class="n">spacing</span> <span class="mi">8</span> <span class="o">$</span> <span class="kt">Grid</span>
<span class="nf">pidginLayout</span> <span class="ow">=</span> <span class="n">withIM</span> <span class="p">(</span><span class="mi">1</span><span class="o">%</span><span class="mi">7</span><span class="p">)(</span><span class="kt">Role</span> <span class="s">&quot;buddy_list&quot;</span><span class="p">)</span> <span class="n">gridLayout</span>

<span class="nf">main</span> <span class="ow">=</span> <span class="kr">do</span>
    <span class="n">xmproc</span> <span class="ow">&lt;-</span> <span class="n">spawnPipe</span> <span class="s">&quot;/usr/bin/xmobar /home/arch/.xmobarrc&quot;</span>
    <span class="n">xmonad</span> <span class="o">$</span> <span class="n">defaultConfig</span>
        <span class="p">{</span> <span class="n">manageHook</span> <span class="ow">=</span> <span class="n">manageDocks</span> <span class="o">&lt;+&gt;</span> <span class="n">myManageHook</span> <span class="o">&lt;+&gt;</span> <span class="n">manageHook</span> <span class="n">defaultConfig</span>
    <span class="p">,</span> <span class="n">borderWidth</span> <span class="ow">=</span> <span class="n">myBorderWidth</span>
    <span class="p">,</span> <span class="n">normalBorderColor</span> <span class="ow">=</span> <span class="n">myNormalBorderColor</span>
    <span class="p">,</span> <span class="n">startupHook</span> <span class="ow">=</span> <span class="n">myStartupHook</span>
    <span class="p">,</span> <span class="n">focusedBorderColor</span> <span class="ow">=</span> <span class="n">myFocusedBorderColor</span>
    <span class="p">,</span> <span class="n">terminal</span> <span class="ow">=</span> <span class="n">myTerm</span>
    <span class="p">,</span> <span class="n">workspaces</span> <span class="ow">=</span> <span class="n">myWorkspaces</span>
    <span class="p">,</span> <span class="n">layoutHook</span> <span class="ow">=</span> <span class="n">avoidStruts</span> <span class="o">$</span> <span class="n">myLayout</span> <span class="c1">-- avoidStruts чтобы окна не загораживали xmobar</span>
    <span class="p">,</span> <span class="n">logHook</span> <span class="ow">=</span> <span class="n">dynamicLogWithPP</span> <span class="o">$</span> <span class="n">xmobarPP</span>
            <span class="p">{</span> <span class="n">ppOutput</span> <span class="ow">=</span> <span class="n">hPutStrLn</span> <span class="n">xmproc</span>
                <span class="p">,</span> <span class="n">ppTitle</span> <span class="ow">=</span> <span class="n">xmobarColor</span> <span class="s">&quot;green&quot;</span> <span class="s">&quot;&quot;</span> <span class="o">.</span> <span class="n">shorten</span> <span class="mi">50</span>
            <span class="p">}</span>
    <span class="p">,</span> <span class="n">modMask</span> <span class="ow">=</span> <span class="n">mod4Mask</span>
    <span class="p">}</span> <span class="p">`</span><span class="n">additionalKeys</span><span class="p">`</span>
    <span class="p">[((</span><span class="n">mod4Mask</span><span class="p">,</span> <span class="n">xK_Print</span><span class="p">),</span> <span class="n">spawn</span> <span class="s">&quot;xfce4-screenshooter&quot;</span><span class="p">)</span>
    <span class="p">,</span> <span class="p">((</span><span class="n">mod4Mask</span><span class="p">,</span> <span class="n">xK_Return</span><span class="p">),</span> <span class="n">spawn</span> <span class="s">&quot;terminal&quot;</span><span class="p">)</span>
    <span class="p">,</span> <span class="p">((</span><span class="n">mod4Mask</span><span class="p">,</span> <span class="n">xK_b</span><span class="p">),</span> <span class="n">spawn</span> <span class="s">&quot;chromium&quot;</span><span class="p">)</span>
    <span class="p">,</span> <span class="p">((</span><span class="n">mod4Mask</span><span class="p">,</span> <span class="n">xK_f</span><span class="p">),</span> <span class="n">spawn</span> <span class="s">&quot;firefox&quot;</span><span class="p">)</span>
    <span class="p">,</span> <span class="p">((</span><span class="n">mod4Mask</span><span class="p">,</span> <span class="n">xK_w</span><span class="p">),</span> <span class="n">spawn</span> <span class="s">&quot;geany&quot;</span><span class="p">)</span>
    <span class="p">,</span> <span class="p">((</span><span class="n">mod4Mask</span><span class="p">,</span> <span class="n">xK_r</span><span class="p">),</span> <span class="n">spawn</span> <span class="s">&quot;okular&quot;</span><span class="p">)</span>
    <span class="p">,</span> <span class="p">((</span><span class="n">mod4Mask</span><span class="p">,</span> <span class="n">xK_h</span><span class="p">),</span> <span class="n">spawn</span> <span class="s">&quot;spacefm&quot;</span><span class="p">)</span>
    <span class="p">,</span> <span class="p">((</span><span class="n">mod4Mask</span><span class="p">,</span> <span class="n">xK_e</span><span class="p">),</span> <span class="n">spawn</span> <span class="s">&quot;eclipse&quot;</span><span class="p">)</span>
    <span class="p">,</span> <span class="p">((</span><span class="n">mod4Mask</span><span class="p">,</span> <span class="n">xK_x</span><span class="p">),</span> <span class="n">spawn</span> <span class="s">&quot;deadbeef&quot;</span><span class="p">)</span>
    <span class="p">,</span> <span class="p">((</span><span class="n">mod4Mask</span><span class="p">,</span> <span class="n">xK_i</span><span class="p">),</span> <span class="n">spawn</span> <span class="s">&quot;pidgin&quot;</span><span class="p">)</span>
    <span class="p">,</span> <span class="p">((</span><span class="n">mod4Mask</span><span class="p">,</span> <span class="n">xK_c</span><span class="p">),</span> <span class="n">spawn</span> <span class="s">&quot;cheese&quot;</span><span class="p">)</span>
<span class="p">]</span>
</code></pre></div>
<p>И, пожалуй, ссылки на хорошие статьи по теме: <a href="http://ro-che.info/docs/xmonad/">№1</a>, <a href="http://www.linuxandlife.com/2011/11/how-to-configure-xmonad-arch-linux.html#xmonad-layout-and-workspaces">№2</a>.</p>

<p>А так располагаются окна с компоновкой Circle</p>

<p><a href="http://farm4.staticflickr.com/3822/9263651078_17ce45c263_b.jpg" data-lighter><img src="http://farm4.staticflickr.com/3822/9263651078_17ce45c263_b.jpg"/></a></p>


<br />
<p align="center"><a href="#">наверх</a></p>


</div>
</div>
<div id="footer-wrapper">
<ul class="footer">
   <a href="/tags/android.html" class="set-1">android</a> <a href="/tags/arch.html" class="set-3">arch</a> <a href="/tags/blog.html" class="set-1">blog</a> <a href="/tags/debian.html" class="set-1">debian</a> <a href="/tags/decorations.html" class="set-1">decorations</a> <a href="/tags/editors.html" class="set-1">editors</a> <a href="/tags/gentoo.html" class="set-1">gentoo</a> <a href="/tags/git.html" class="set-1">git</a> <a href="/tags/kernel.html" class="set-1">kernel</a> <a href="/tags/latex.html" class="set-1">latex</a> <a href="/tags/linux.html" class="set-5">linux</a> <a href="/tags/python.html" class="set-2">python</a> <a href="/tags/ruby.html" class="set-1">ruby</a> <a href="/tags/server.html" class="set-2">server</a> <a href="/tags/web.html" class="set-1">web</a> <a href="/tags/windows.html" class="set-1">windows</a>
</ul>
<ul class="footer">
    <li class="footer">&copy; 2011&mdash;2013 ::</li>
    <li class="footer"><a href="/">unix-lab.org</a> ::</li>
    <li class="footer">licensed under <a href="http://creativecommons.org/licenses/by-nc/3.0/deed.ru">CC BY-NC</a></li>
</ul>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', '');
  ga('send', 'pageview');

</script>

</body>
</html>
