<!DOCTYPE html>
<html lang="ru">
<head>

  <title>Vim как основной текстовый редактор | UNIX-LAB.ORG</title>
  <meta name="description" content="">

  <meta charset="utf-8">
  <meta name="author" content="redVi">
  <meta name='yandex-verification' content='494a81ecb0e796d6' />
  <meta name="viewport" content="initial-scale=1.0, width=device-width" />
  <link rel="icon" href="http://www.unix-lab.org/favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="http://www.unix-lab.org/favicon.ico" type="image/x-icon">
  <link href="http://www.unix-lab.org/assets/stylesheets/screen.css" rel="stylesheet" type="text/css" />
  <link rel="alternate" type="application/atom+xml" title="UNIX-LAB.ORG" href="http://www.unix-lab.org/feeds/atom.xml">
  <link rel="alternate" type="application/rss+xml" title="UNIX-LAB.ORG" href="http://www.unix-lab.org/feeds/rss.xml">
</head>
<body>
<div id="outer-wrapper">
<div id="header-wrapper">
    <a href="/"><div class="logo"></div></a>
    <div class="small">блог об операционных системах, open source и программировании</div>
<div class="nav">
  <ul>
    <li><a href="/archive/">Архив</a></li>
    <li><a href="/about/">О блоге</a></li>
    <li><a href="/author/">Автор</a></li>
  </ul>
</div>
</div>

<div id="main">
<h2>Vim как основной текстовый редактор</h2>
<h5><i class="icon-feather"></i> 19 августа 2012

 <i class="icon-bookmarks"></i>

<a href="/tags/editors.html">Editors /</a>

</h5>

<p>Есть такой замечательный редактор &mdash; vim. Насколько он удобен в использовании, настолько и сложен в освоении. Помнится, когда автору впервые пришлось открыть сие чудо работы с текстом, минут семь было затрачено на поиск того, как же это дело теперь закрыть.</p>

<p>На самом деле vim содержит большое количество труднозапоминаемых команд, но использовать их все как правило не приходится. Ниже представлен список основных команд, нужных для обычной повседневной работы, а также файл <code>.vimrc</code>, очень простой, содержащий лишь строку &mdash; самую главную.</p>

<p>Итак, основные команды для работы с vim.</p>

<p>Если вы открыли vim без предварительного чтения какого-либо справочного материала, спешу радостно сообщить вам, что вы обречены продолжить свой путь в поисковой системе, с глазами по чайнику и одним-единственным вопросом &quot;как выйти из vim&quot;. Поэтому давайте начнём  сглавного, а именно:</p>

<h3 id="toc_0">Выход из текстового редактора</h3>

<ul>
<li><code>:q + !</code> - выйти без сохранения документа</li>
<li><code>:w + q</code> - записать изменения и выйти</li>
</ul>

<p>Вам следует знать, что vim имеет три режима для различных действий. Это может быть просмотр, вставка текста или же вставка команд.</p>

<h3 id="toc_1">Режимы в vim</h3>

<ul>
<li><code>ESC</code> - переключение к визуальному режиму</li>
<li><code>:</code> - переключение к командному режиму ( для вставки команд )</li>
<li><code>i</code> - перейти в режим вставки текста</li>
</ul>

<h3 id="toc_2">Работа с текстом, вставка/замена/копирование</h3>

<ul>
<li><code>i</code> - вставка текста</li>
<li><code>r + нужная буква</code> - замена буквы в слове на нужную (при опечатке, например)</li>
<li><code>4 + dd</code> - удалить 4 строки</li>
<li><code>3 + x</code> - удалить 3 символа</li>
<li><code>shift + d</code> - удалить от текущей позиции до конца строки</li>
<li><code>:% + s + /old/new/ + g</code> - заменить все слова &#39;old&#39; на &#39;new&#39;</li>
<li><code>:r + file.txt</code>  - прочитать и вставить содержимое файла &#39;file.txt&#39; в место под курсором</li>
<li><code>:0r + file.txt</code>  - вставить файл в начало документа</li>
<li><code>:$ + r + file.txt</code>  - вставить файл в конец документа</li>
<li><code>:w + &gt;&gt; + ~/file.txt</code>  -  дописать содержимое буфера в конец другого файла</li>
<li><code>s</code> - замена текущего символа</li>
<li><code>shift + s</code> - замена текущей строки</li>
<li><code>d + 1</code> - удалить один символ</li>
<li><code>d + w</code> - удалить слово</li>
<li><code>d + d</code> - удалить строку</li>
<li><code>y + y</code> - скопировать строку</li>
<li><code>y + a + p</code> - скопировать абзац</li>
<li><code>p</code> - вставить</li>
<li><code>u</code> - отменить изменение</li>
<li><code>ctrl + r</code> - восстановить отменённый текст</li>
<li><code>:earlier + 5m</code> - воссоздать текст таким, каким он был 5 минут назад</li>
<li><code>:later + 10s</code> - наоборот переместиться на 10 секунд вперёд</li>
</ul>

<h3 id="toc_3">Перемещение по тексту</h3>

<ul>
<li><code>w</code> - передвинуть курсор вперед на одно слово</li>
<li><code>b</code> - передвинуть курсор назад на одно слово</li>
<li><code>0</code> - передвинуть курсор на начало текущей строки</li>
<li><code>$</code> - передвинуть курсор на конец текущей строки</li>
<li><code>5 + e</code> - перейти к пятому слову от курсора</li>
<li><code>}</code> - перейти к следующему параграфу</li>
<li><code>35 + j</code> - на 35 строк вниз</li>
<li><code>35 + k</code> - на 35 строк вверх</li>
<li><code>5 + l</code> - на 5 символов вправо</li>
<li><code>5 + h</code> - на 5 символов влево</li>
<li><code>50 + shift + g</code> - на страницу 50</li>
<li><code>%</code> - перейти к парной скобке</li>
</ul>

<h3 id="toc_4">Поиск по тексту/выделение</h3>

<ul>
<li><code>/ + g</code> - искать слова, начинающиеся на &quot;g&quot;</li>
<li><code>n</code> - перейти к следующему слову в поиске</li>
<li><code>shift + n</code> - перейти к предыдущему слову в поиске</li>
<li><code>v + %</code> - когда курсор установлен на одной из скобок - выделит всё до её пары.</li>
<li><code>vi + b</code> - выделить всё между двумя ближайшими к курсору круглыми скобками</li>
<li><code>vi + B</code> - выделить всё между двумя ближайшими к курсору фигурными скобками</li>
<li><code>vi + &quot;</code> - выделить всё между двумя ближайшими двойными кавычками</li>
<li><code>vi + &#39;</code> - выделить всё между двумя ближайшими одинарными кавычками</li>
<li><code>gg + VG</code> - выделить весь файл</li>
</ul>

<h3 id="toc_5">Разное</h3>

<p>Открыть файл, но предопределить синтаксис редактора:</p>

<ul>
<li><code>$ vim &quot;+set filetype=lisp&quot; file.rb</code></li>
<li><code>Ctrl + wv</code> - разбить окно по вертикали</li>
<li><code>Ctrl + ww</code> - переключиться между окнами</li>
<li><code>$ vim -R</code> - открыть файл только для чтения</li>
<li><code>:set local spell spelllang = en_us</code> - проверка орфографии</li>
<li><code>:tabedit + file</code> - открыть файл во вкладке</li>
<li><code>:tabnew</code> - открыть новую вкладку в новом буфере</li>
<li><code>:tabc или :q</code> - закрыть вкладку</li>
<li><code>:sp</code> - разделить окно</li>
<li><code>m + имя закладки</code> - создать закладку в тексте</li>
<li><code>&#39; + имя закладки</code> - вернуться к закладке</li>
<li><code>vim ftp://ftp.site.com/file</code> - правка документа по ftp</li>
<li><code>:! + command</code> - запустить команду оболочки в vim, где command - нужная команда</li>
<li><code>:Vex или :Sex</code> - открытие дерева каталогов</li>
</ul>

<h3 id="toc_6">Комментирование кода:</h3>

<p>Чтобы закомментировать участок кода:</p>

<ul>
<li><code>ctrl + v</code> - выделяем нужный участок</li>
<li><code>shift + i</code> - вставляем знак комментария</li>
<li><code>ESC</code> - подтвердить</li>
</ul>

<p>Удалить участок кода:</p>

<ul>
<li><code>ctrl + v</code> - выделить участок для удаления</li>
<li><code>shift + x</code> - удалить выделенные символы (символы комментария)</li>
</ul>

<h3 id="toc_7">&quot;Табличное&quot; копирование</h3>

<ul>
<li><code>ctrl + v</code> - для выделения текста</li>
<li><code>3 + j</code> - для перехода на три строки вниз</li>
<li><code>$</code> - перемещение курсора в конец строки</li>
<li><code>y</code> - копирование</li>
<li><code>p</code> - вставка</li>
</ul>

<p>Таким образом, можно скопировать не отдельные строки, а таблицу из файла</p>

<p>Чтобы горячие клавиши vim легче запомнились, можно держать перед глазами или &quot;вклеить&quot; в обои рабочего стола вставки с ними:</p>

<ul>
<li>для светлого фона:</li>
</ul>

<p><img src="http://4.bp.blogspot.com/-VFQ86ePWBf0/UTd3jbNJUtI/AAAAAAAAEGY/q-4lH_0--SA/s1600/vim_table.png" alt="vim light"></p>

<p>-для тёмного фона:</p>

<p><img src="http://2.bp.blogspot.com/-1j6nmxzR4CA/UTd3s4LFoSI/AAAAAAAAEGg/F-RnTlJdiLI/s1600/vim.png" alt="vim dark"></p>

<h3 id="toc_8">Плагины</h3>

<p>Для vim существует огромное количество самых разных плагинов, призванных расширить функционал или же упростить работу с этим текстовым редактором. Из vim можно даже сделать настоящий IDE: попробуйте установить Eclim, если вам это нужно.</p>

<p>Все доступные плагины следует найти и забрать со страницы <a href="http://www.vim.org/index.php">vim.org</a>. Рассмотрим некоторые из них.</p>

<ul>
<li>поддержка языка python.</li>
</ul>

<p>Скачать плагин можно со страницы <a href="http://www.vim.org/scripts/script.php?script_id=1439">http://www.vim.org/scripts/script.php?script_id=1439</a>, после чего нужно положить его в директорию <code>~/.vim/compiler</code> и дать команду <code>:make</code> для сборки плагина.</p>

<ul>
<li>Плагин Project</li>
</ul>

<p>станет неплохим подспорьем при создании новых проектов. Забрать здесь: <a href="http://www.vim.org/scripts/script.php?script_id=69">http://www.vim.org/scripts/script.php?script_id=69</a></p>

<p>Распаковать в <code>~/.vim/</code> и запустить командой <code>:Project</code>.</p>

<ul>
<li>Поддержка шаблонов</li>
</ul>

<p>также сэкономит немало времени, если вы пишете один и тот же код во многих файлах. Это могут быть html-теги или же указание к пути интерпретатора в каждом файле python. Местонахождение плагина <a href="http://www.vim.org/scripts/script.php?script_id=2834">http://www.vim.org/scripts/script.php?script_id=2834</a></p>

<p>После скачивания плагина создайте директорию <code>.vim/templates/</code> с необходимыми шаблонами и укажите редактору на них. Например:</p>
<div class="highlight"><pre><code class="vim language-vim" data-lang="vim"># .vimrc
<span class="p">:</span>autocmd <span class="nb">BufNewFile</span>  *.<span class="k">py</span>      <span class="m">0</span>r <span class="p">~</span><span class="sr">/.vim/</span>templates/template.<span class="k">py</span>
<span class="p">:</span>autocmd <span class="nb">BufNewFile</span> *.html     <span class="m">0</span>r <span class="p">~</span><span class="sr">/.vim/</span>templates/template.html
</code></pre></div>
<p>Это значит, что подготовленные нами шаблоны будут подгружаться каждый раз, когда мы создаём новый файл с одним из указанных форматов.</p>

<ul>
<li>плагин xml for vim</li>
</ul>

<p><a href="http://www.vim.org/scripts/script.php?script_id=301">http://www.vim.org/scripts/script.php?script_id=301</a> будет автоматически закрывать теги.</p>

<h3 id="toc_9">Кодировка</h3>

<p>Часто кириллица отображается в виде разнообразных &quot;кракозябр&quot;, если исходный файл был получен в кодировке cp-1251. Но мы можем отобразить всё нормально. Для этого нужно открыть исходный файл и внести некоторые преобразования:</p>
<div class="highlight"><pre><code class="console language-console" data-lang="console"><span class="gp">$</span> vim file.txt
<span class="go">:e ++enc=cp-1251</span>
</code></pre></div>
<p>Сейчас всё должно быть нормально.</p>

<p>Теперь небольшая доводка <code>.vimrc</code></p>
<div class="highlight"><pre><code class="vim language-vim" data-lang="vim"><span class="p">-</span> Включить подсветку синтаксиса
<span class="nb">syntax</span> <span class="k">on</span>
<span class="p">-</span> Отображать номера строк
<span class="k">set</span> <span class="k">number</span>
<span class="p">-</span> Настройки табуляции
<span class="k">set</span> <span class="nb">tabstop</span><span class="p">=</span><span class="m">4</span>
<span class="k">set</span> <span class="nb">shiftwidth</span><span class="p">=</span><span class="m">4</span>
<span class="k">set</span> <span class="nb">smarttab</span>
<span class="p">-</span> Запоминать историю команд
<span class="k">set</span> <span class="k">history</span><span class="p">=</span><span class="m">50</span>
<span class="p">-</span> Переносить длинные строки
<span class="k">set</span> <span class="nb">wrap</span>
<span class="p">-</span> Цвет комментариев
<span class="nb">highlight</span> Comment ctermfg<span class="p">=</span>Green
<span class="p">-</span> Отключить <span class="s2">&quot;звуковое сопровождение&quot;</span> редактора
<span class="k">set</span> <span class="nb">vb</span> <span class="nb">t_vb</span><span class="p">=</span>
<span class="p">-</span> Настройки порядка кодировки и формата файлов
<span class="k">set</span> <span class="nb">ffs</span><span class="p">=</span>unix<span class="p">,</span>dos<span class="p">,</span>mac
<span class="k">set</span> <span class="nb">fencs</span><span class="p">=</span>utf<span class="m">-8</span><span class="p">,</span>cp1251<span class="p">,</span>koi8<span class="p">-</span><span class="k">r</span><span class="p">,</span>ucs<span class="m">-2</span><span class="p">,</span>cp866
<span class="p">-</span> Автозакрытие фигурных скобок и кавычек

<span class="p">:</span><span class="nb">inoremap</span> <span class="s2">&quot; &quot;</span>&quot; <span class="p">&lt;</span>LEFT<span class="p">&gt;</span>
imap [ []<span class="p">&lt;</span>LEFT<span class="p">&gt;</span>
imap <span class="p">(</span> <span class="p">()&lt;</span>LEFT<span class="p">&gt;</span>
imap { {}<span class="p">&lt;</span>LEFT<span class="p">&gt;</span>
<span class="p">-</span> Отключение создания файлов бекапа и свапа
<span class="k">set</span> <span class="nb">nobackup</span>
<span class="k">set</span> <span class="nb">nowritebackup</span>
<span class="k">set</span> <span class="nb">noswapfile</span>
</code></pre></div>
<h3 id="toc_10">Цветовые схемы vim</h3>

<p>Можно использовать встроенный набор цветовых схем. Дабы выбрать какую-то из них, откройте vim и введите:</p>
<div class="highlight"><pre><code class="vim language-vim" data-lang="vim">colorcheme имя<span class="p">-</span>схемы
</code></pre></div>
<p>Просмотреть все цветовые схемы:</p>
<div class="highlight"><pre><code class="vim language-vim" data-lang="vim"><span class="p">:</span><span class="k">colorscheme</span>
</code></pre></div>
<p>Для подстановки выбранной схемы жмите <code>&lt; Tab &gt;</code></p>

<p>Также можно найти привлекательные цветовые схемы на просторах Интернета. Они представляют собой текстовый файл настроек с расширением <code>.vim</code>, и класть такие файлы следует в директорию <code>~./vim/colors</code>, после чего прописать в <code>.vimrc</code> выбранную тему.</p>

<h3 id="toc_11">Vim автокомплит</h3>

<p>Да, у vim много возможностей, большинство из которых реализованы в виде плагинов. Например, будет намного удобнее, если вместо ввода всего слова, мы пишем лишь часть, жмём <code>tab</code> - остальное дописывает vim. Автодополнение, да ещё и умное! Для этого нужно скачать плагин <code>SuperTab</code>, открыть его в vim и выполнить команду:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">:so%
</code></pre></div>
<p>Плагин будет автоматически собран. Все его файлы помещены в директорию <code>.vim/</code></p>

<p><code>.vimrc</code> автора (или лучше <a href="https://github.com/redVi/dotfiles/tree/master/vim">забрать с github</a>)</p>
<div class="highlight"><pre><code class="vim language-vim" data-lang="vim"><span class="nb">syntax</span> <span class="k">on</span>
<span class="k">set</span> <span class="k">number</span>
<span class="k">set</span> <span class="nb">tabstop</span><span class="p">=</span><span class="m">4</span>
<span class="k">set</span> <span class="nb">shiftwidth</span><span class="p">=</span>
<span class="k">set</span> <span class="nb">smarttab</span>
<span class="c">&quot; Включаем &#39;умную&#39; автоматическую расстановку отступов</span>
<span class="k">set</span> <span class="nb">smartindent</span>
<span class="c">&quot; Копирует отступ от предыдущей строки</span>
<span class="k">set</span> <span class="nb">autoindent</span>
<span class="k">set</span> <span class="k">history</span><span class="p">=</span><span class="m">50</span>
<span class="k">set</span> <span class="nb">wrap</span>
<span class="k">set</span> <span class="nb">vb</span> <span class="nb">t_vb</span><span class="p">=</span>
<span class="k">set</span> <span class="nb">ffs</span><span class="p">=</span>unix<span class="p">,</span>dos<span class="p">,</span>mac
<span class="k">set</span> <span class="nb">fencs</span><span class="p">=</span>utf<span class="m">-8</span><span class="p">,</span>cp1251<span class="p">,</span>koi8<span class="p">-</span><span class="k">r</span><span class="p">,</span>ucs<span class="m">-2</span><span class="p">,</span>cp866
<span class="p">:</span><span class="nb">inoremap</span> <span class="s2">&quot; &quot;</span>&quot; <span class="p">&lt;</span>LEFT<span class="p">&gt;</span>
imap [ []<span class="p">&lt;</span>LEFT<span class="p">&gt;</span>
imap <span class="p">(</span> <span class="p">()&lt;</span>LEFT<span class="p">&gt;</span>
imap { {}<span class="p">&lt;</span>LEFT<span class="p">&gt;</span>
<span class="k">set</span> <span class="nb">nobackup</span>
<span class="k">set</span> <span class="nb">nowritebackup</span>
<span class="k">set</span> <span class="nb">noswapfile</span>
<span class="k">set</span> <span class="nb">foldenable</span>
<span class="k">set</span> <span class="nb">fdm</span><span class="p">=</span><span class="nb">syntax</span>
<span class="k">set</span> <span class="k">foldopen</span><span class="p">=</span><span class="k">all</span>
<span class="c">&quot; :colorscheme railscasts&quot;</span>
<span class="p">:</span><span class="k">colorscheme</span> codeschool
<span class="k">set</span> <span class="nb">background</span><span class="p">=</span><span class="nb">dark</span>
<span class="c">&quot; Включаем подсветку выражения, которое ищется в тексте</span>
<span class="k">set</span> <span class="nb">hlsearch</span>
<span class="c">&quot;Настройки сворачивания блоков кода (фолдинг)</span>
<span class="k">set</span> <span class="nb">foldenable</span> <span class="c">&quot; включить фолдинг</span>
<span class="k">set</span> <span class="nb">foldmethod</span><span class="p">=</span><span class="nb">syntax</span> <span class="c">&quot; определять блоки на основе синтаксиса файла</span>
<span class="k">set</span> <span class="nb">foldcolumn</span><span class="p">=</span><span class="m">3</span> <span class="c">&quot; показать полосу для управления сворачиванием</span>
<span class="k">filetype</span> plugin <span class="k">on</span> <span class="c">&quot; автоматически определять тип файла</span>
</code></pre></div>
<p><b>P.S.</b> рекомендации по поводу нужных настроек и дополнительных плагинов приветствуются</p>


<br />
<p align="center"><a href="#">наверх</a></p>
<br />
<div id="comments"></div>
<script type="text/javascript" class="juvia">
(function() {
    var options = {
        container   : '#comments',
        site_key    : 'gcquc3fefcn3kyoj7jstkb7ic8f90cw',
        topic_key   : '/posts/vim',
        topic_url   : 'http://www.unix-lab.org/posts/vim',
        topic_title : 'Vim как основной текстовый редактор' || 'http://www.unix-lab.org/posts/vim',
        include_base: !window.Juvia,
        include_css : !window.Juvia
    };

    function makeQueryString(options) {
        var key, params = [];
        for (key in options) {
            params.push(
                encodeURIComponent(key) +
                '=' +
                encodeURIComponent(options[key]));
        }
        return params.join('&');
    }

    function makeApiUrl(options) {
        // Makes sure that each call generates a unique URL, otherwise
        // the browser may not actually perform the request.
        if (!('_juviaRequestCounter' in window)) {
            window._juviaRequestCounter = 0;
        }

        var result =
            'http://juvia-unixlab.rhcloud.com/api/show_topic.js' +
            '?_c=' + window._juviaRequestCounter +
            '&' + makeQueryString(options);
        window._juviaRequestCounter++;
        return result;
    }

    var s       = document.createElement('script');
    s.async     = true;
    s.type      = 'text/javascript';
    s.className = 'juvia';
    s.src       = makeApiUrl(options);
    (document.getElementsByTagName('head')[0] ||
     document.getElementsByTagName('body')[0]).appendChild(s);
})();
</script>



</div>
</div>
<div id="footer-wrapper">
<ul class="footer">
   <a href="/tags/android.html" class="set-1">android</a> <a href="/tags/arch.html" class="set-3">arch</a> <a href="/tags/blog.html" class="set-1">blog</a> <a href="/tags/debian.html" class="set-1">debian</a> <a href="/tags/decorations.html" class="set-1">decorations</a> <a href="/tags/editors.html" class="set-1">editors</a> <a href="/tags/gentoo.html" class="set-1">gentoo</a> <a href="/tags/git.html" class="set-1">git</a> <a href="/tags/kernel.html" class="set-1">kernel</a> <a href="/tags/latex.html" class="set-1">latex</a> <a href="/tags/linux.html" class="set-5">linux</a> <a href="/tags/python.html" class="set-2">python</a> <a href="/tags/ruby.html" class="set-1">ruby</a> <a href="/tags/server.html" class="set-2">server</a> <a href="/tags/web.html" class="set-1">web</a> <a href="/tags/windows.html" class="set-1">windows</a>
</ul>
<ul class="footer">
    <li class="footer">&copy; 2011&mdash;2013 ::</li>
    <li class="footer"><a href="/">unix-lab.org</a> ::</li>
    <li class="footer">licensed under <a href="http://creativecommons.org/licenses/by-nc/3.0/deed.ru">CC BY-NC</a></li>
</ul>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', '');
  ga('send', 'pageview');

</script>

</body>
</html>
